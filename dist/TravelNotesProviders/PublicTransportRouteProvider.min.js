/**
 * 
 * @source: https://github.com/wwwouaiebe/TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * travelnotes - version 4.0.0-dev
 * Build 00026 - 2022-07-30T11:33:29+0200 
 * Copyright 2017 2022 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";class t{static get d0(){return 0}static get d90(){return 90}static get d180(){return 180}static get d270(){return 270}static get d360(){return 360}static get d540(){return 540}static get toRadians(){return Math.PI/180}static get fromRadians(){return 180/Math.PI}}class e{static get fixed(){return 2}static get invalid(){return-1}static get defaultValue(){return 0}static get metersInKm(){return 1e3}}class i{static get fixed(){return 2}static get defaultValue(){return 0}}class s{static get width(){return 40}static get height(){return 40}static get svgViewboxDim(){return 200}}class r{static get defaultValue(){return 0}static get fixed(){return 6}static get maxLat(){return 90}static get minLat(){return-90}static get maxLng(){return 180}static get minLng(){return-180}}class n{static get notEdited(){return 0}static get editedNoChange(){return 1}static get editedChanged(){return 2}}const a=20,o=6371e3,h=-1,c=-1;const l=new class{t(t,e){for(const i in e)try{if("dataset"===i){const i=e.dataset;for(const e in i)t.dataset["tan"+e]=i[e]}else t[i]=e[i]}catch(t){t instanceof Error&&console.error(t)}t.target&&(t.rel="noopener noreferrer")}constructor(){}create(t,e,i){let s=null;return"text"===t.toLowerCase()?s=document.createTextNode(e.value||""):(s="select"===t.toLowerCase()?document.createElement(t):Object.seal(document.createElement(t)),e&&this.t(s,e)),i&&i.appendChild(s),s}};class u{i;o;constructor(t,e){this.i=t,this.o=e}get url(){return this.i}get errorsString(){return this.o}}class d{h;o;constructor(t,e){this.h=t,this.o=e}get htmlString(){return this.h}get errorsString(){return this.o}}class p{l=new Map;constructor(){this.l.set("a",["href","target"]),this.l.set("div",[]),this.l.set("del",[]),this.l.set("em",[]),this.l.set("figcaption",[]),this.l.set("figure",[]),this.l.set("h1",[]),this.l.set("h2",[]),this.l.set("h3",[]),this.l.set("h4",[]),this.l.set("h5",[]),this.l.set("h6",[]),this.l.set("hr",[]),this.l.set("img",["src","alt","width","height"]),this.l.set("ins",[]),this.l.set("li",[]),this.l.set("mark",[]),this.l.set("ol",[]),this.l.set("p",[]),this.l.set("s",[]),this.l.set("small",[]),this.l.set("strong",[]),this.l.set("span",[]),this.l.set("sub",[]),this.l.set("sup",[]),this.l.set("ul",[]),this.l.set("svg",["xmlns","viewBox","class"]),this.l.set("text",["x","y","text-anchor"]),this.l.set("polyline",["points","class","transform"]),this.l.set("#text",[])}getValidAttributesNames(t){return this.l.get(t).concat(["id","class","dir","title"])}getValidNodeName(t){const e=t.toLowerCase();return this.l.get(e)?e:""}}class _{u="";p="";static _=new p;g(t){return t.replaceAll(/\u003c/g,"&lt;").replaceAll(/\u003e/g,"&gt;").replaceAll(/\u0022/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}v(t,e){const i=this.sanitizeToUrl(t,e).url;""===i&&""!==t?this.p+="\nAn invalid url ("+t+") was removed from a "+e+" attribute":this.u+=" "+e+'="'+i+'"'}m(t,e){_._.getValidAttributesNames(e).forEach((e=>{t.hasAttributeNS(null,e)&&(this.u+=" "+e+'="'+this.g(t.getAttributeNS(null,e))+'"',t.removeAttributeNS(null,e))}))}T(t,e){t.hasAttribute("target")&&(this.u+=' rel="noopener noreferrer"'),_._.getValidAttributesNames(e).forEach((e=>{t.hasAttribute(e)&&("href"===e||"src"===e?this.v(t.getAttribute(e),e):this.u+=" "+e+'="'+this.g(t.getAttribute(e))+'"',t.removeAttribute(e))}))}M(t){for(let e=0;e<t.attributes.length;e++)"rel"!==t.attributes[e].name&&(this.p+="\nAn unsecure attribute "+t.attributes[e].name+'="'+t.attributes[e].value+'" was removed.')}j(t){const e=t.childNodes;for(let i=0;i<e.length;i++){const e=t.childNodes[i],s=_._.getValidNodeName(e.nodeName);""===s?this.p+="\nAn invalid tag "+e.nodeName+" was removed":"#text"===s?this.u+=this.g(e.nodeValue):(this.u+="<"+s,"svg"===s||"text"===s||"polyline"===s?this.m(e,s):this.T(e,s),this.u+=">",this.j(e),this.u+="</"+s+">",e.attributes&&this.M(e))}}N(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg",e);return _._.getValidAttributesNames(e).forEach((e=>{t.hasAttributeNS(null,e)&&(i.setAttributeNS(null,e,t.getAttributeNS(null,e)),t.removeAttributeNS(null,e))})),i}I(t,e){const i=document.createElement(e);return _._.getValidAttributesNames(e).forEach((e=>{if(t.hasAttribute(e))if("href"===e||"src"===e){const s=this.sanitizeToUrl(t.getAttribute(e),e).url;""!==s&&i.setAttribute(e,s)}else i.setAttribute(e,t.getAttribute(e))})),t.hasAttribute("target")&&i.setAttribute("rel","noopener noreferrer"),i}D(t,e){const i=t.childNodes;for(let s=0;s<i.length;s++){const i=t.childNodes[s],r=_._.getValidNodeName(i.nodeName);if("#text"===r)e.appendChild(document.createTextNode(i.nodeValue));else if(""!==r){const t="svg"===r||"text"===r||"polyline"===r?this.N(i,r):this.I(i,r);e.appendChild(t),this.D(i,t)}}}constructor(){}sanitizeToHtmlElement(t,e){const i=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html"),s=new DocumentFragment;i&&"#document"===i.nodeName?(this.D(i.body.firstChild,s),e.appendChild(s)):e.textContent=""}clone(t){const e=document.createElement(t.tagName);return this.D(t,e),e}sanitizeToHtmlString(t){this.u="",this.p="";const e=(new DOMParser).parseFromString("<div>"+t.replace("&nbsp;","਀")+"</div>","text/html");return e&&"#document"===e.nodeName?(this.j(e.body.firstChild),new d(this.u,this.p)):new d("","Parsing error")}sanitizeToUrl(t,e){const i=e||"href",s=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!s||"#document"!==s.nodeName)return new u("","Parsing error");const r=s.body.firstChild;let n="";for(let t=0;t<r.childNodes.length;t++){if("#text"!==r.childNodes[t].nodeName)return new u("","Invalid characters found in the url");n+=r.childNodes[t].nodeValue}if(n=n.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),n!==t)return new u("","Invalid characters found in the url");const a=["https:"];if("http:"!==window.location.protocol&&"href"!==i||a.push("http:"),"href"===i){a.push("mailto:"),a.push("sms:"),a.push("tel:");const t=n.match(/^\u0023\w*/);if(t&&n===t[0])return new u(n,"")}"src"===i&&a.push("data:");let o=null;try{o=new URL(n)}catch(t){return new u("","Invalid url string")}if(c===a.indexOf(o.protocol))return new u("","Invalid protocol "+o.protocol);if(c!==["sms:","tel:"].indexOf(o.protocol))return o.pathname.match(/^\+[0-9,*,\u0023]*$/)?new u(n,""):new u("","Invalid sms: or tel: url");try{encodeURIComponent(o.href)}catch(t){return new u("","Invalid character in url")}return new u(n,"")}sanitizeToJsString(t){const e=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!e||"#document"!==e.nodeName)return"";const i=e.body.firstChild;let s="";for(let t=0;t<i.childNodes.length;t++){if("#text"!==i.childNodes[t].nodeName)return"";s+=i.childNodes[t].nodeValue}return s=s.replaceAll(/</g,"≺").replaceAll(/>/g,"≻").replaceAll(/"/g,"″").replaceAll(/\u0027/g,"′"),s}sanitizeToColor(t){const e=t.match(/^\u0023[0-9,A-F,a-f]{6}$/);return e?e[0]:null}}const g=new _;const v=new class{A=new Map;constructor(){}setTranslations(t){t.forEach((t=>this.A.set(t.msgid,g.sanitizeToJsString(t.msgstr))))}getText(t,e){let i=this.A.get(t);return e&&i&&Object.getOwnPropertyNames(e).forEach((t=>i=i.replace("{"+t+"}",e[t]))),i||t}};class m{L;constructor(t){this.L=t}handleEvent(){this.L.onOk()}}class w{L;constructor(t){this.L=t}handleEvent(){this.L.onCancel()}}class f{L;constructor(t){this.L=t}handleEvent(t){this.L.keyboardELEnabled&&("Escape"===t.key||"Esc"===t.key?this.L.onCancel():"Enter"===t.key&&this.L.onOk())}}class y{static O=0;static get nextObjId(){return++y.O}}const b="2.4.0";class T{k="";P=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];B=[];constructor(t,e){if(c===this.P.indexOf(t))throw new Error("Invalid ObjType name : "+t);this.k=t,this.B=e,Object.freeze(this.B)}get name(){return this.k}get version(){return b}get properties(){return this.B}get jsonObject(){return{name:this.k,version:b}}validate(t){if(!Object.getOwnPropertyNames(t).includes("name"))throw new Error("No name for "+this.k);if(this.k!==t.name)throw new Error("Invalid name for "+this.k);if(!Object.getOwnPropertyNames(t).includes("version"))throw new Error("No version for "+this.k)}}class M{S=null;C=c;constructor(t){this.S=t}get value(){return this.C<this.S.length?this.S.at(this.C):null}get previous(){return 0>=this.C?null:this.S.at(this.C-1)}get next(){return this.C<this.S.length-1?this.S.at(this.C+1):null}get done(){return++this.C>=this.S.length}get first(){return 0===this.C}get last(){return this.C>=this.S.length-1}get index(){return this.C}}class j{R;W;U;H(t){return this.R.findIndex((e=>e.objId===t))}F(t,e,i){let s=this.H(t);if(c===s)throw new Error("invalid objId for next or previous function");if(1!==i&&-1!==i)throw new Error("invalid direction");let r=e;for(r||(r=()=>!0),s+=i;c<s&&s<this.R.length&&!r(this.R[s]);)s+=i;return c===s||this.R.length===s?null:this.R[s]}constructor(t){this.R=[],this.U=t;const e=new t;if(!e.objType||!e.objType.name)throw new Error("invalid object name for collection");this.W=e.objType.name}add(t){if(!t.objType||!t.objType.name||t.objType.name!==this.W)throw new Error("invalid object name for add function");this.R.push(t)}at(t){return t<this.R.length&&t>c?this.R[t]:null}forEach(t){let e=null;const i=this.iterator;for(;!i.done;)e=t(i.value,e);return e}getAt(t){const e=this.H(t);return c===e?null:this.R[e]}moveTo(t,e,i){let s=this.H(t),r=this.H(e);if(c===s||c===r)throw new Error("invalid objId for function  myMoveTo");i||r++,this.R.splice(r,0,this.R[s]),r<s&&s++,this.R.splice(s,1)}next(t,e){return this.F(t,e,1)}previous(t,e){return this.F(t,e,-1)}remove(t){const e=this.H(t);if(c===e)throw new Error("invalid objId for remove function");this.R.splice(e,1)}removeAll(t){t?this.R.splice(1,this.R.length-2):this.R.length=0}replace(t,e){const i=this.H(t);if(c===i)throw new Error("invalid objId for replace function");if(!e.objType||!e.objType.name||e.objType.name!==this.W)throw new Error("invalid object name for replace function");this.R[i]=e}reverse(){this.R.reverse()}sort(t){this.R.sort(t)}swap(t,e){const i=this.H(t);if(c===i||0===i&&e||this.R.length-1===i&&!e)throw new Error("invalid objId for swap function");const s=e?-1:1,r=this.R[i];this.R[i]=this.R[i+s],this.R[i+s]=r}get first(){return this.R[0]}get iterator(){return new M(this)}get last(){return this.R[this.R.length-1]}get length(){return this.R.length}get jsonObject(){const t=[],e=this.iterator;for(;!e.done;)t.push(e.value.jsonObject);return t}set jsonObject(t){this.R.length=0,Array.isArray(t)&&t.forEach((t=>{const e=new this.U;e.jsonObject=t,this.add(e)}))}}const N={APIKeys:{saveToSessionStorage:!0},APIKeysDialog:{haveUnsecureButtons:!0,showAPIKeys:!0,showButton:!0},baseDialog:{cancelTouchX:100,cancelTouchY:150,deltaZoomDistance:75},contextMenu:{timeout:1500},errorsUI:{helpTimeOut:3e4,showError:!0,showHelp:!0,showInfo:!0,showWarning:!0,timeOut:1e4},geoCoder:{distances:{city:1200,hamlet:200,town:1500,village:400},osmCityAdminLevel:{DEFAULT:"8",GB:"10"}},geoLocation:{marker:{color:"#ff0000",radius:11},options:{enableHighAccuracy:!1,maximumAge:0,timeout:1/0},watch:!0,zoomFactor:17,zoomToPosition:!0},itineraryPaneUI:{showManeuvers:!1,showNotes:!0},itineraryPoint:{marker:{color:"#ff0000",fill:!1,radius:7,weight:2},zoomFactor:17},layersToolbarUI:{haveLayersToolbarUI:!0,toolbarTimeOut:1500,theDevil:{addButton:!1}},map:{center:{lat:50.50923,lng:5.49542},zoom:12},mouseUI:{haveMouseUI:!0},nominatim:{url:"https://nominatim.openstreetmap.org/",language:"*"},note:{grip:{size:10,opacity:0,moveOpacity:1},haveBackground:!1,maxManeuversNotes:100,polyline:{color:"#808080",weight:1},reverseGeocoding:!1,svgIcon:{angleDistance:10,angleDirection:{right:35,slightRight:80,continue:100,slightLeft:145,left:200,sharpLeft:270,sharpRight:340},rcnRefDistance:20,roadbookFactor:1,zoom:17}},noteDialog:{areaHeight:{icon:2,popupContent:8},mask:{iconsDimension:!0,iconTextArea:!1,tooltip:!1,popupContent:!1,address:!1,link:!1,phone:!0},theDevil:{addButton:!1,zoomFactor:17}},osmSearch:{nextSearchLimit:{color:"#ff0000",fill:!1,weight:1},previousSearchLimit:{color:"#006400",fill:!1,weight:1},searchPointMarker:{color:"#006400",fill:!1,radius:20,weight:4},searchPointPolyline:{color:"#006400",fill:!1,weight:4},showSearchNoteDialog:!1},overpassApi:{useNwr:!0,timeOut:40,url:"https://lz4.overpass-api.de/api/interpreter"},paneUI:{switchToItinerary:!1,switchToTravelNotes:!1,switchToSearch:!0},printRouteMap:{firefoxBrowser:!0,isEnabled:!0,maxTiles:240,paperWidth:287,paperHeight:200,printNotes:!0,borderWidth:10,zoomFactor:15,entryPointMarker:{color:"#00ff00",weight:4,radius:10,fill:!0,fillOpacity:1},exitPointMarker:{color:"#ff0000",weight:4,radius:10,fill:!0,fillOpacity:1}},route:{color:"#ff0000",dashIndex:0,dashChoices:[{text:"——————",iDashArray:[0]},{text:"— — — — —",iDashArray:[4,2]},{text:"—‧—‧—‧—‧—",iDashArray:[4,2,0,2]},{text:"················",iDashArray:[0,2]}],elev:{smooth:!0,smoothCoefficient:2.5,smoothPoints:3},showDragTooltip:3,width:3},routeEditor:{showEditedRouteInRoadbook:!0},travelEditor:{startMinimized:!0,startupRouteEdition:!0,timeout:1e3},travelNotes:{haveBeforeUnloadWarning:!0,language:"fr"},travelNotesToolbarUI:{contactMail:{url:"https://github.com/wwwouaiebe/TravelNotes/issues"}},wayPoint:{reverseGeocoding:!1,geocodingIncludeName:!1}};const I=new class{constructor(){}get UUID(){const t=["","","","-","","-","","-","","-","","","","","",""],e=new Uint8Array(16);window.crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let i="";for(let s=0;s<16;s++)i+=e[s].toString(16).padStart(2,"0")+t[s];return i}storageAvailable(t){try{const e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(t){return!1}}openFile(t,e){const i=document.createElement("input");i.type="file",e&&(i.accept=e),i.addEventListener("change",t,!1),i.click()}saveFile(t,e,i){try{const s=i?window.URL.createObjectURL(new File([e],t,{type:i})):URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("href",s),r.setAttribute("download",t),r.click(),window.URL.revokeObjectURL(s)}catch(t){t instanceof Error&&console.error(t)}}formatTime(t){const e=Math.floor(t);if(0===e)return"";const i=Math.floor(e/86400),s=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);return 0<i?i+" "+v.getText("Utilities - Day")+" "+s+" "+v.getText("Utilities - Hour"):0<s?s+" "+v.getText("Utilities - Hour")+" "+r+" "+v.getText("Utilities - Minute"):0<r?r+" "+v.getText("Utilities - Minute"):n+" "+v.getText("Utilities - Second")}formatDistance(t){const i=Math.floor(t);return 0>=i?"0 km":Math.floor(i/e.metersInKm)+","+Math.floor(i%e.metersInKm/10).toFixed(0).padStart(2,"0").padEnd(3,"0")+" km"}numberToDMS(t){let e=t,i=Math.floor(t);e-=i;let s=Math.floor(60*e);e-=s/60,e*=3600;let r=Math.floor(e);return e-=r,e=Math.floor(100*e),i.toString()+"° "+s.toString()+"' "+r+'" '+e}formatLatDMS(t){return t>0?this.numberToDMS(t)+" N":this.numberToDMS(-t)+" S"}formatLngDMS(t){return t>0?this.numberToDMS(t)+" E":this.numberToDMS(-t)+" W"}formatLatLngDMS(t){return 0===t[0]&&0===t[1]?"":this.formatLatDMS(t[0])+" - "+this.formatLngDMS(t[1])}formatLat(t){return t>0?t.toFixed(r.fixed)+" N":(-t).toFixed(r.fixed)+" S"}formatLng(t){return t>0?t.toFixed(r.fixed)+" E":(-t).toFixed(r.fixed)+" W"}formatLatLng(t){return 0===t[0]&&0===t[1]?"":this.formatLat(t[0])+" - "+this.formatLng(t[1])}};class D{V;K(){this.V.routes.forEach((t=>{t.dashArray=0,t.hidden=!1}))}G(){this.V.routes.forEach((t=>{t.edited=n.notEdited}))}X(){this.G(),this.V.editedRoute={name:"",wayPoints:[{name:"",lat:0,lng:0,objId:2,objType:{name:"WayPoint",version:"1.4.0"}},{name:"",lat:0,lng:0,objId:3,objType:{name:"WayPoint",version:"1.4.0"}}],notes:[],itinerary:{itineraryPoints:[],maneuvers:[],provider:"",transitMode:"",objId:1,objType:{name:"Itinerary",version:"1.4.0"}},width:3,color:"_private_ff0000",dashArray:0,chain:!0,distance:0,duration:0,edited:n.notEdited,hidden:!1,chainedDistance:0,objId:4,objType:{name:"Route",version:"1.4.0"}}}Y(){if(this.V.userData.layerId){const t=[{layerId:"0",layerName:"OSM - Color"},{layerId:"1",layerName:"OSM - Black and White"},{layerId:"2",layerName:"Thunderforest - Transport"},{layerId:"3",layerName:"Thunderforest - OpenCycleMap"},{layerId:"4",layerName:"Thunderforest - Outdoors"},{layerId:"5",layerName:"Esri - Aerial view"},{layerId:"6",layerName:"Kartverket - Norway"},{layerId:"7",layerName:"IGN-NGI - Belgium now"},{layerId:"12",layerName:"Thunderforest - Landscape"},{layerId:"24",layerName:"Lantmäteriet - Sweden"},{layerId:"25",layerName:"Maanmittauslaitos - Finland"}].find((t=>t.layerId===this.V.userData.layerId));this.V.layerName=t?t.layerName:"OSM - Color"}else this.V.layerName="OSM - Color"}q(t){t.forEach((t=>{t.elev=i.defaultValue}))}Z(){this.V.routes.forEach((t=>{t.itinerary.hasProfile=!1,t.itinerary.ascent=0,t.itinerary.descent=0,this.q(t.itinerary.itineraryPoints)})),this.V.editedRoute.itinerary.hasProfile=!1,this.V.editedRoute.itinerary.ascent=0,this.V.editedRoute.itinerary.descent=0,this.q(this.V.editedRoute.itinerary.itineraryPoints)}J(t){t.itinerary.maneuvers.forEach((t=>{"kArriveDefault"===t.iconName&&(t.distance=e.defaultValue)}))}$(t){t.wayPoints.forEach((t=>{t.address=t.name,t.name=""}))}tt(){this.V.routes.forEach((t=>{t.editionStatus=t.edited,this.J(t),this.$(t)})),this.V.editedRoute.editionStatus=this.V.editedRoute.edited,this.J(this.V.editedRoute),this.$(this.V.editedRoute)}et(){this.V.routes.forEach((t=>{t.dashIndex=t.dashArray})),this.V.editedRoute.dashIndex=this.V.editedRoute.dashArray}it(t){return t.replaceAll(/style='color:white;background-color:red'/g,"class='TravelNotes-Note-WhiteRed'").replaceAll(/style='color:white;background-color:green'/g,"class='TravelNotes-Note-WhiteGreen'").replaceAll(/style='color:white;background-color:blue'/g,"class='TravelNotes-Note-WhiteBlue'").replaceAll(/style='color:white;background-color:brown'/g,"class='TravelNotes-Note-WhiteBrown'").replaceAll(/style='color:white;background-color:black'/g,"class='TravelNotes-Note-WhiteBlack'").replaceAll(/style='border:solid 0.1em'/g,"class='TravelNotes-Note-BlackWhite'").replaceAll(/style='background-color:white;'/g,"class='TravelNotes-Note-Knooppunt'").replaceAll(/style='fill:green;font:bold 120px sans-serif;'/g,"").replaceAll(/style='fill:none;stroke:green;stroke-width:10;'/g,"")}st(t){"string"==typeof t.iconHeight&&(t.iconHeight=Number.parseInt(t.iconHeight)),"string"==typeof t.iconWidth&&(t.iconWidth=Number.parseInt(t.iconWidth)),t.iconContent=this.it(t.iconContent),t.popupContent=this.it(t.popupContent),t.tooltipContent=this.it(t.tooltipContent),t.phone=this.it(t.phone),t.address=this.it(t.address)}rt(){this.V.notes.forEach((t=>{this.st(t)})),this.jsonTravel.routes.forEach((t=>{t.notes.forEach((t=>{this.st(t)}))}))}nt(){switch(this.V.objType.version){case"1.0.0":this.K();case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":this.X();case"1.5.0":this.Y();case"1.6.0":this.Z();case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":this.tt();case"1.12.0":case"1.13.0":this.rt();case"2.0.0":case"2.1.0":case"2.2.0":case"2.3.0":this.et(),this.V.objType.version="2.4.0";break;default:throw new Error("invalid version for travel")}}constructor(){}update(t){t.objType.version!==b&&(this.V=t,this.nt())}}class E{constructor(){}validateObject(t){if(!Object.getOwnPropertyNames(t).includes("objType"))throw new Error("No objType for "+this.objType.name);this.objType.validate(t.objType),"Travel"===this.objType.name&&this.objType.version!==t.objType.version&&(new D).update(t);const e=Object.getOwnPropertyNames(t);return this.objType.properties.forEach((t=>{if(!e.includes(t))throw new Error("No "+t+" for "+this.objType.name)})),t}}class x extends E{static ot=new T("WayPoint",["address","name","lat","lng","objId"]);ht="";ct="";lt=r.defaultValue;ut=r.defaultValue;O=h;constructor(){super(),this.O=y.nextObjId}get name(){return this.ht}set name(t){this.ht="string"==typeof t?g.sanitizeToJsString(t):""}get address(){return this.ct}set address(t){this.ct="string"==typeof t?g.sanitizeToJsString(t):""}get lat(){return this.lt}set lat(t){this.lt="number"==typeof t?t:r.defaultValue}get lng(){return this.ut}set lng(t){this.ut="number"==typeof t?t:r.defaultValue}get fullName(){let t=""===this.name?this.address:this.name+", "+this.address;return""===t&&(t=I.formatLatLng([this.lat,this.lng])),t}get latLng(){return[this.lat,this.lng]}set latLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.lt=t[0],this.ut=t[1]):(this.lt=r.defaultValue,this.ut=r.defaultValue)}get objId(){return this.O}get objType(){return x.ot}get jsonObject(){return{name:this.name,address:this.address,lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.address=e.address,this.name=e.name,this.lat=e.lat,this.lng=e.lng,this.O=y.nextObjId}}class A extends E{static ot=new T("ItineraryPoint",["lat","lng","distance","elev","objId"]);lt=r.defaultValue;ut=r.defaultValue;dt=e.defaultValue;_t=i.defaultValue;O=h;constructor(){super(),this.O=y.nextObjId}get lat(){return this.lt}set lat(t){this.lt="number"==typeof t?t:r.defaultValue}get lng(){return this.ut}set lng(t){this.ut="number"==typeof t?t:r.defaultValue}get distance(){return this.dt}set distance(t){this.dt="number"==typeof t?t:e.defaultValue}get elev(){return this._t}set elev(t){this._t="number"==typeof t?t:r.defaultValue}get latLng(){return[this.lat,this.lng]}set latLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.lt=t[0],this.ut=t[1]):(this.lt=r.defaultValue,this.ut=r.defaultValue)}get objType(){return A.ot}get objId(){return this.O}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),elev:parseFloat(this.elev.toFixed(i.fixed)),objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.lat=e.lat,this.lng=e.lng,this.distance=e.distance,this.elev=e.elev,this.O=y.nextObjId}}class L extends E{static ot=new T("Maneuver",["iconName","instruction","distance","duration","itineraryPointObjId","objId"]);gt="";vt="";wt=h;dt=e.defaultValue;ft=e.defaultValue;O=h;constructor(){super(),this.O=y.nextObjId}get iconName(){return this.gt}set iconName(t){this.gt="string"==typeof t?g.sanitizeToJsString(t):""}get instruction(){return this.vt}set instruction(t){this.vt="string"==typeof t?g.sanitizeToJsString(t):""}get itineraryPointObjId(){return this.wt}set itineraryPointObjId(t){this.wt="number"==typeof t?t:h}get distance(){return this.dt}set distance(t){this.dt="number"==typeof t?t:e.defaultValue}get duration(){return this.ft}set duration(t){this.ft="number"==typeof t?t:e.defaultValue}get objType(){return L.ot}get objId(){return this.O}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.iconName=e.iconName,this.instruction=e.instruction,this.distance=e.distance,this.duration=e.duration,this.itineraryPointObjId=e.itineraryPointObjId,this.O=y.nextObjId}}class O extends E{static ot=new T("Itinerary",["hasProfile","ascent","descent","itineraryPoints","maneuvers","provider","transitMode","objId"]);O=h;yt=!1;bt=0;Tt=0;Mt="";jt="";Nt=new j(A);It=new j(L);constructor(){super(),this.O=y.nextObjId}get hasProfile(){return this.yt}set hasProfile(t){this.yt="boolean"==typeof t&&t}get ascent(){return this.bt}set ascent(t){this.bt="number"==typeof t?Number.parseInt(t):0}get descent(){return this.Tt}set descent(t){this.Tt="number"==typeof t?Number.parseInt(t):0}get provider(){return this.Mt}set provider(t){this.Mt="string"==typeof t?g.sanitizeToJsString(t):""}get transitMode(){return this.jt}set transitMode(t){this.jt="string"==typeof t?g.sanitizeToJsString(t):""}get itineraryPoints(){return this.Nt}get maneuvers(){return this.It}get objType(){return O.ot}get objId(){return this.O}get jsonObject(){return{hasProfile:this.hasProfile,ascent:this.ascent,descent:this.descent,itineraryPoints:this.itineraryPoints.jsonObject,maneuvers:this.maneuvers.jsonObject,provider:this.provider,transitMode:this.transitMode,objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.hasProfile=e.hasProfile,this.ascent=e.ascent,this.descent=e.descent,this.itineraryPoints.jsonObject=e.itineraryPoints,this.maneuvers.jsonObject=e.maneuvers,this.provider=e.provider,this.transitMode=e.transitMode,this.O=y.nextObjId;const i=new Map;let s=0;const r=this.itineraryPoints.iterator;for(;!r.done;)i.set(e.itineraryPoints[s].objId,r.value.objId),s++;const n=this.maneuvers.iterator;for(;!n.done;)n.value.itineraryPointObjId=i.get(n.value.itineraryPointObjId)}}class k extends E{static ot=new T("Note",["iconHeight","iconWidth","iconContent","popupContent","tooltipContent","phone","url","address","iconLat","iconLng","lat","lng","distance","chainedDistance","objId"]);Dt=s.height;Et=s.width;xt="";At="";Lt="";Ot="";i="";ct="";kt=r.defaultValue;Pt=r.defaultValue;lt=r.defaultValue;ut=r.defaultValue;dt=e.invalid;Bt=e.defaultValue;O=h;constructor(){super(),this.O=y.nextObjId}get iconHeight(){return this.Dt}set iconHeight(t){this.Dt="number"==typeof t?t:s.height}get iconWidth(){return this.Et}set iconWidth(t){this.Et="number"==typeof t?t:s.width}get iconContent(){return this.xt}set iconContent(t){this.xt="string"==typeof t?g.sanitizeToHtmlString(t).htmlString:""}get popupContent(){return this.At}set popupContent(t){this.At="string"==typeof t?g.sanitizeToHtmlString(t).htmlString:""}get tooltipContent(){return this.Lt}set tooltipContent(t){this.Lt="string"==typeof t?g.sanitizeToHtmlString(t).htmlString:""}get phone(){return this.Ot}set phone(t){this.Ot="string"==typeof t?g.sanitizeToHtmlString(t).htmlString:""}get url(){return this.i}set url(t){this.i="string"==typeof t?encodeURI(g.sanitizeToUrl(t).url):""}get address(){return this.ct}set address(t){this.ct="string"==typeof t?g.sanitizeToHtmlString(t).htmlString:""}get iconLat(){return this.kt}set iconLat(t){this.kt="number"==typeof t?t:r.defaultValue}get iconLng(){return this.Pt}set iconLng(t){this.Pt="number"==typeof t?t:r.defaultValue}get lat(){return this.lt}set lat(t){this.lt="number"==typeof t?t:r.defaultValue}get lng(){return this.ut}set lng(t){this.ut="number"==typeof t?t:r.defaultValue}get distance(){return this.dt}set distance(t){this.dt="number"==typeof t?t:e.invalid}get chainedDistance(){return this.Bt}set chainedDistance(t){this.Bt="number"==typeof t?t:e.defaultValue}get isRouteNote(){return this.dt!==e.invalid}get iconLatLng(){return[this.iconLat,this.iconLng]}set iconLatLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.kt=t[0],this.Pt=t[1]):(this.kt=r.defaultValue,this.Pt=r.defaultValue)}get latLng(){return[this.lat,this.lng]}set latLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.lt=t[0],this.ut=t[1]):(this.lt=r.defaultValue,this.ut=r.defaultValue)}get objType(){return k.ot}get objId(){return this.O}get jsonObject(){return{iconHeight:this.iconHeight,iconWidth:this.iconWidth,iconContent:this.iconContent,popupContent:this.popupContent,tooltipContent:this.tooltipContent,phone:this.phone,url:this.url,address:this.address,iconLat:parseFloat(this.iconLat.toFixed(r.fixed)),iconLng:parseFloat(this.iconLng.toFixed(r.fixed)),lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),chainedDistance:parseFloat(this.chainedDistance.toFixed(e.fixed)),objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.iconHeight=e.iconHeight,this.iconWidth=e.iconWidth,this.iconContent=e.iconContent,this.popupContent=e.popupContent,this.tooltipContent=e.tooltipContent,this.phone=e.phone,this.url=e.url,this.address=e.address,this.iconLat=e.iconLat,this.iconLng=e.iconLng,this.lat=e.lat,this.lng=e.lng,this.distance=e.distance,this.chainedDistance=e.chainedDistance,this.O=y.nextObjId}}class P extends E{static ot=new T("Route",["name","wayPoints","notes","itinerary","width","color","dashIndex","chain","chainedDistance","distance","duration","editionStatus","hidden","objId"]);ht="";St=new j(x);Ct=new j(k);Rt=new O;Wt=N.route.width;Ut=N.route.color;Ht=N.route.dashIndex;Ft=!0;Bt=e.defaultValue;dt=e.defaultValue;ft=e.defaultValue;zt=n.notEdited;Vt=!1;O=h;constructor(){super(),this.St.add(new x),this.St.add(new x),this.O=y.nextObjId}get name(){return this.ht}set name(t){this.ht="string"==typeof t?g.sanitizeToJsString(t):""}get wayPoints(){return this.St}get notes(){return this.Ct}get itinerary(){return this.Rt}get width(){return this.Wt}set width(t){this.Wt="number"==typeof t?t:N.route.width}get color(){return this.Ut}set color(t){this.Ut="string"==typeof t&&g.sanitizeToColor(t)||N.route.color}get dashIndex(){return this.Ht}set dashIndex(t){this.Ht="number"==typeof t&&N.route.dashChoices[t]?t:0}get dashString(){let t="";return N.route.dashChoices[this.Ht].iDashArray.forEach((e=>t+=String(e*this.Wt)+",")),t.substring(0,t.length-1)}get chain(){return this.Ft}set chain(t){this.Ft="boolean"==typeof t&&t}get chainedDistance(){return this.Bt}set chainedDistance(t){this.Bt="number"==typeof t?t:e.defaultValue}get distance(){return this.dt}set distance(t){this.dt="number"==typeof t?t:e.defaultValue}get duration(){return this.ft}set duration(t){this.ft="number"==typeof t?t:e.defaultValue}get editionStatus(){return this.zt}set editionStatus(t){this.zt="number"==typeof t?t:n.notEdited}get hidden(){return this.Vt}set hidden(t){this.Vt="boolean"==typeof t&&t}get computedName(){let t=this.name;return""===t&&(t=(""===this.wayPoints.first.fullName?"???":this.wayPoints.first.fullName)+" ⮞ "+(""===this.wayPoints.last.fullName?"???":this.wayPoints.last.fullName)),t}get objId(){return this.O}get objType(){return P.ot}haveValidWayPoints(){let t=!0;return this.wayPoints.forEach((e=>{t=t&&r.defaultValue!==e.lat&&r.defaultValue!==e.lng})),t}get jsonObject(){return{name:this.name,wayPoints:this.wayPoints.jsonObject,notes:this.notes.jsonObject,itinerary:this.itinerary.jsonObject,width:this.width,color:this.color,dashIndex:this.dashIndex,chain:this.chain,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,editionStatus:this.editionStatus,hidden:this.hidden,chainedDistance:parseFloat(this.chainedDistance.toFixed(e.fixed)),objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.name=e.name,this.wayPoints.jsonObject=e.wayPoints,this.notes.jsonObject=e.notes,this.itinerary.jsonObject=e.itinerary,this.width=e.width,this.color=e.color,this.dashIndex=e.dashIndex,this.chain=e.chain,this.distance=e.distance,this.duration=e.duration,this.editionStatus=e.editionStatus,this.hidden=e.hidden,this.chainedDistance=e.chainedDistance,this.O=y.nextObjId}}class B extends E{static ot=new T("Travel",["editedRoute","routes","notes","layerName","name","readOnly","objId"]);Kt=new P;Gt=new j(P);Ct=new j(k);Xt="OSM - Color";ht="";Yt=!1;O=h;constructor(){super(),this.Gt.add(new P),this.O=y.nextObjId}get editedRoute(){return this.Kt}set editedRoute(t){this.Kt="Route"===t?.objType?.name?t:new P}get routes(){return this.Gt}get notes(){return this.Ct}get layerName(){return this.Xt}set layerName(t){this.Xt="string"==typeof t?g.sanitizeToJsString(t):"OSM - Color"}get name(){return this.ht}set name(t){this.ht="string"==typeof t?g.sanitizeToJsString(t):""}get readOnly(){return this.Yt}set readOnly(t){this.Yt="boolean"!=typeof t||t}get objId(){return this.O}get objType(){return B.ot}get jsonObject(){return{editedRoute:this.editedRoute.jsonObject,layerName:this.layerName,name:this.name,routes:this.routes.jsonObject,notes:this.notes.jsonObject,readOnly:this.readOnly,objId:this.O,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.editedRoute.jsonObject=e.editedRoute,this.layerName=t.layerName,this.name=e.name,this.readOnly=e.readOnly,this.routes.jsonObject=e.routes,this.notes.jsonObject=e.notes,this.O=y.nextObjId}}class S{Mt="";jt="";constructor(){}get provider(){return this.Mt}set provider(t){this.Mt="string"==typeof t?t:""}get transitMode(){return this.jt}set transitMode(t){this.jt="string"==typeof t?t:""}}const C=new class{Qt;qt;Zt;Jt;$t;te;ee;ie;constructor(){this.Qt=new Map,this.qt=new Map,this.Zt=new S,this.Jt=I.UUID,this.$t=null,this.te=new B,this.ee=h,this.ie=[]}get map(){return this.$t}set map(t){this.$t||(this.$t=t)}get travel(){return this.te}get editedRouteObjId(){return this.ee}set editedRouteObjId(t){this.ee="number"==typeof t?t:h}get searchData(){return this.ie}get providers(){return this.Qt}get mapObjects(){return this.qt}get routing(){return this.Zt}get UUID(){return this.Jt}};class R{lt;ut;constructor(t,e){this.lt=t,this.ut=e}static clone(t){return new R(t.lat,t.lng)}get latLng(){return[this.lt,this.ut]}get lat(){return this.lt}get lng(){return this.ut}}class W extends R{dt;constructor(t,e,i){super(t,e),this.dt=i}get distance(){return this.dt}}class U extends W{_t;bt;constructor(t,e,i,s,r){super(t,e,i),this._t=s,this.bt=r}get elev(){return this._t}get ascent(){return this.bt}}class H{static get se(){return 100}constructor(){}getLatLngElevAtDist(t,e){if(t.distance<=e||0>=e)return null;let i=0;const s=t.itinerary.itineraryPoints.iterator;for(;i<e&&!s.done;)i+=s.value.distance;const r=s.value;s.done;const n=(r.distance-i+e)/r.distance;return new U(r.lat+(s.value.lat-r.lat)*n,r.lng+(s.value.lng-r.lng)*n,e,r.elev+(s.value.elev-r.elev)*n,H.se*(s.value.elev-r.elev)/r.distance)}getClosestLatLngDistance(t,i){if(0===t.itinerary.itineraryPoints.length)return null;const s=t.itinerary.itineraryPoints.iterator;s.done;let r=Number.MAX_VALUE;const n=window.L.Projection.SphericalMercator.project(window.L.latLng(i[0],i[1]));let a=window.L.Projection.SphericalMercator.project(window.L.latLng(s.value.lat,s.value.lng)),o=null,h=e.defaultValue,c=s.value.distance;for(;!s.done;){const t=window.L.Projection.SphericalMercator.project(window.L.latLng(s.value.lat,s.value.lng));let e=window.L.LineUtil.pointToSegmentDistance(n,a,t);e<r&&(r=e,o=window.L.Projection.SphericalMercator.unproject(window.L.LineUtil.closestPointOnSegment(n,a,t)),h=c-o.distanceTo(window.L.latLng(s.value.lat,s.value.lng))),c+=s.value.distance,a=t}return new W(o.lat,o.lng,h)}getLatLngBounds(t){const e=window.L.latLng([r.maxLat,r.maxLng]),i=window.L.latLng([r.minLat,r.minLng]);return t.forEach((t=>{e.lat=Math.min(e.lat,t[0]),e.lng=Math.min(e.lng,t[1]),i.lat=Math.max(i.lat,t[0]),i.lng=Math.max(i.lng,t[1])})),window.L.latLngBounds(e,i)}getSquareBoundingBox(e,i){const s=e[0]*t.toRadians,r=i/o*t.fromRadians,n=Math.acos((Math.cos(i/o)-Math.sin(s)**2)/Math.cos(s)**2)*t.fromRadians;return window.L.latLngBounds(window.L.latLng([e[0]-r,e[1]-n]),window.L.latLng([e[0]+r,e[1]+n]))}project(t,e){const i=C.map.project(window.L.latLng(t),e);return[i.x,i.y]}screenCoordToLatLng(t,e){const i=C.map.containerPointToLatLng(window.L.point(t,e));return[i.lat,i.lng]}addPoints(t,e){return[t[0]+e[0],t[1]+e[1]]}subtrackPoints(t,e){return[t[0]-e[0],t[1]-e[1]]}}const F=new H;class z{constructor(){}handleEvent(t){t.preventDefault()}}class V{constructor(){}handleEvent(t){if(!t.target.classList.contains("TravelNotes-Background"))return;let e=C.map.getZoom()+(0>t.deltaY?1:-1);e=Math.min(C.map.getMaxZoom(),e),e=Math.max(C.map.getMinZoom(),e),C.map.setZoomAround(window.L.point(t.clientX,t.clientY),e)}}class K{constructor(){}handleEvent(t){t.preventDefault()}}class G{L;re=!1;ne=!1;ae=0;oe=0;he;ce;le;ue;de(t){if(this.re&&(this.ae!==t.screenX||this.oe!==t.screenY)){N.baseDialog.cancelTouchY>this.oe&&t.screenY<this.oe&&N.baseDialog.cancelTouchX>this.ae&&this.L.onCancel();const e=F.screenCoordToLatLng(this.ae,this.oe),i=F.screenCoordToLatLng(t.screenX,t.screenY);C.map.panTo([this.he.lat+e[0]-i[0],this.he.lng+e[1]-i[1]])}}pe(t){let e=Math.sqrt((t.item(0).clientX-t.item(1).clientX)**2+(t.item(0).clientY-t.item(1).clientY)**2),i=this.ce,s=e-this.le;N.baseDialog.deltaZoomDistance<s?i++:-N.baseDialog.deltaZoomDistance>s&&i--,i=Math.min(C.map.getMaxZoom(),i),i=Math.max(C.map.getMinZoom(),i),i!==this.ce&&(C.map.setZoomAround(this.ue,i),this.ce=i,this.le=e)}_e(t){this.re&&1===t.changedTouches.length&&(this.de(t.changedTouches.item(0)),this.re=!1)}ge(t){this.re&&1===t.changedTouches.length?this.de(t.changedTouches.item(0)):this.ne&&2===t.targetTouches.length&&this.pe(t.targetTouches)}ve(t){if(1===t.targetTouches.length){const e=t.changedTouches.item(0);this.ae=e.screenX,this.oe=e.screenY,this.he=C.map.getCenter(),this.re=!0,this.ne=!1}2===t.targetTouches.length&&(this.ce=C.map.getZoom(),this.ue=window.L.point((t.targetTouches.item(0).clientX+t.targetTouches.item(1).clientX)/2,(t.targetTouches.item(0).clientY+t.targetTouches.item(1).clientY)/2),this.le=Math.sqrt((t.targetTouches.item(0).clientX-t.targetTouches.item(1).clientX)**2+(t.targetTouches.item(0).clientY-t.targetTouches.item(1).clientY)**2),this.re=!1,this.ne=!0)}constructor(t){this.L=t}handleEvent(t){switch(t.currentTarget===t.target&&t.preventDefault(),t.type){case"touchstart":this.ve(t);break;case"touchmove":this.ge(t);break;case"touchend":this._e(t)}}}class X{static get LEFT_BUTTON(){return 0}re=!1;ae=0;oe=0;he;de(t){const e=F.screenCoordToLatLng(this.ae,this.oe),i=F.screenCoordToLatLng(t.screenX,t.screenY);C.map.panTo([this.he.lat+e[0]-i[0],this.he.lng+e[1]-i[1]])}constructor(){}handleEvent(t){switch(t.type){case"mousedown":t.button===X.LEFT_BUTTON&&(this.ae=t.screenX,this.oe=t.screenY,this.he=C.map.getCenter(),this.re=!0);break;case"mousemove":t.button===X.LEFT_BUTTON&&this.re&&(document.selection?document.selection.empty():window.getSelection().removeAllRanges(),this.de(t));break;case"mouseup":t.button!==X.LEFT_BUTTON||!this.re||this.ae===t.screenX&&this.oe===t.screenY||this.de(t),this.re=!1}}}class Y{me;constructor(t){this.me=t}handleEvent(t){this.me.dragStartX=t.screenX,this.me.dragStartY=t.screenY,t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move"}}class Q{me;we;fe;constructor(t,e,i){this.me=t,this.we=e,this.fe=i}handleEvent(t){this.me.dialogX+=t.screenX-this.me.dragStartX,this.me.dialogX=Math.min(Math.max(this.me.dialogX,a),this.fe.clientWidth-this.we.clientWidth-a),this.me.dialogY+=t.screenY-this.me.dragStartY,this.me.dialogY=Math.max(this.me.dialogY,a);const e=this.fe.clientHeight-Math.max(this.me.dialogY,0)-a;this.we.style.left=String(this.me.dialogX)+"px",this.we.style.top=String(this.me.dialogY)+"px",this.we.style["max-height"]=String(e)+"px"}}class q{ye;constructor(t){this.ye=t}handleEvent(t){if(t.stopPropagation(),1===t.targetTouches.length){const e=t.changedTouches.item(0);this.ye.touchStartX=e.screenX,this.ye.touchStartY=e.screenY}}}class Z{ye;we;constructor(t,e){this.ye=t,this.we=e}handleEvent(t){if(t.stopPropagation(),1===t.changedTouches.length){const e=t.changedTouches.item(0);this.ye.dialogX+=e.screenX-this.ye.touchStartX,this.ye.dialogY+=e.screenY-this.ye.touchStartY,this.ye.touchStartX=e.screenX,this.ye.touchStartY=e.screenY,this.we.style.left=String(this.ye.dialogX)+"px",this.we.style.top=String(this.ye.dialogY)+"px"}}}class J{ye;we;fe;constructor(t,e,i){this.ye=t,this.we=e,this.fe=i}handleEvent(t){if(t.stopPropagation(),1===t.changedTouches.length){const e=t.changedTouches.item(0);this.ye.dialogX+=e.screenX-this.ye.touchStartX,this.ye.dialogY+=e.screenY-this.ye.touchStartY,this.ye.dialogX=Math.min(Math.max(this.ye.dialogX,a),this.fe.clientWidth-this.we.clientWidth-a),this.ye.dialogY=Math.min(Math.max(this.ye.dialogY,a),this.fe.clientHeight-this.we.clientHeight-a),this.we.style.left=String(this.ye.dialogX)+"px",this.we.style.top=String(this.ye.dialogY)+"px"}this.ye.reset()}}class ${ye;constructor(t){this.ye=t}handleEvent(){this.ye.reset()}}class tt{constructor(){}dragStartX=0;dragStartY=0;dialogX=0;dialogY=0}class et{constructor(){}touchStartX=0;touchStartY=0;dialogX=0;dialogY=0;reset(){this.touchStartX=0,this.touchStartY=0}}class it{be=null;Te=null;Me=null;je=null;Ne=null;constructor(t){for(const e in t)switch(e){case"firstButtonText":this.be=t.firstButtonText;break;case"secondButtonText":this.Te=t.secondButtonText;break;case"selectOptionsData":this.Me=t.selectOptionsData;break;case"title":this.je=t.title;break;case"text":this.Ne=t.text}}get firstButtonText(){return this.be}get secondButtonText(){return this.Te}get selectOptionsData(){return this.Me}get title(){return this.je}get text(){return this.Ne}}class st{Ne;O;constructor(t,e){this.Ne=t,this.O=e}get text(){return this.Ne}get objId(){return this.O}}class rt extends class{Ie;De;Ee;xe;Ae;Le;Oe;ke;Pe;me;ye;Be;Se;Ce;Re;We;Ue;He;Fe;ze;Ve;Ke;Ge;Xe;Ye;Qe=null;qe;Ze;Je(){this.Ie=l.create("div",{className:"TravelNotes-Background"}),this.Be=new z,this.Ie.addEventListener("dragover",this.Be,!1),this.Re=new V,this.Ie.addEventListener("wheel",this.Re,{passive:!0}),this.We=new K,this.Ie.addEventListener("contextmenu",this.We,!1),this.Se=new G(this),this.Ie.addEventListener("touchstart",this.Se,!1),this.Ie.addEventListener("touchmove",this.Se,!1),this.Ie.addEventListener("touchend",this.Se,!1),this.Ie.addEventListener("touchcancel",this.Se,!1),this.Ce=new X,this.Ie.addEventListener("mouseup",this.Ce,!1),this.Ie.addEventListener("mousemove",this.Ce,!1),this.Ie.addEventListener("mousedown",this.Ce,!1)}$e(){this.De=l.create("div",{className:"TravelNotes-BaseDialog-Container"},this.Ie)}ti(){this.Oe=l.create("div",{className:"TravelNotes-BaseDialog-TopBar",draggable:!0},this.De),this.Fe=new q(this.ye),this.Oe.addEventListener("touchstart",this.Fe,!1),this.ze=new Z(this.ye,this.De),this.Oe.addEventListener("touchmove",this.ze,!1),this.Ve=new J(this.ye,this.De,this.Ie),this.Oe.addEventListener("touchend",this.Ve,!1),this.Ke=new $(this.ye),this.Oe.addEventListener("touchcancel",this.Ke,!1),this.Ue=new Y(this.me),this.Oe.addEventListener("dragstart",this.Ue,!1),this.He=new Q(this.me,this.De,this.Ie),this.Oe.addEventListener("dragend",this.He,!1),this.Le=l.create("div",{textContent:"❌",className:"TravelNotes-BaseDialog-CancelButton",title:v.getText("BaseDialog - Cancel")},this.Oe),this.Ge=new w(this),this.Le.addEventListener("click",this.Ge,!1)}ei(){l.create("text",{value:this.title},l.create("div",{className:"TravelNotes-BaseDialog-HeaderDiv"},this.De))}ii(){const t=l.create("div",{className:"TravelNotes-BaseDialog-ContentDiv"},this.De);this.contentHTMLElements.forEach((e=>t.appendChild(e)))}si(){this.Ee=l.create("div",{className:"TravelNotes-BaseDialog-ErrorDiv TravelNotes-Hidden"},this.De)}ri(){l.create("div",{className:"TravelNotes-WaitAnimationBullet"},l.create("div",{className:"TravelNotes-WaitAnimation"},this.xe=l.create("div",{className:"TravelNotes-BaseDialog-WaitDiv  TravelNotes-Hidden"},this.De)))}ni(){const t=l.create("div",{className:"TravelNotes-BaseDialog-FooterDiv"},this.De);this.Ae=l.create("div",{textContent:this.Qe.firstButtonText||"🆗",className:"TravelNotes-BaseDialog-Button"},t),this.Xe=new m(this),this.Ae.addEventListener("click",this.Xe,!1),this.Qe.secondButtonText?(this.ke=l.create("div",{textContent:this.Qe.secondButtonText,className:"TravelNotes-BaseDialog-Button"},t),this.ke.addEventListener("click",this.Ge,!1)):this.ke=null,this.footerHTMLElements.forEach((e=>t.appendChild(e)))}ai(){this.Je(),this.$e(),this.ti(),this.ei(),this.ii(),this.si(),this.ri(),this.ni()}oi(){this.me.dialogX=(this.Ie.clientWidth-this.De.clientWidth)/2,this.me.dialogY=(this.Ie.clientHeight-this.De.clientHeight)/2,this.me.dialogX=Math.min(Math.max(this.me.dialogX,a),this.Ie.clientWidth-this.De.clientWidth-a),this.me.dialogY=Math.max(this.me.dialogY,a),this.ye.dialogX=this.me.dialogX,this.ye.dialogY=this.me.dialogY;const t=this.Ie.clientHeight-Math.max(this.me.dialogY,0)-a;this.De.style.left=String(this.me.dialogX)+"px",this.De.style.top=String(this.me.dialogY)+"px",this.De.style["max-height"]=String(t)+"px"}hi(t,e){this.qe=t,this.Ze=e,this.ai(),document.body.appendChild(this.Ie),this.oi(),this.Ye=new f(this),document.addEventListener("keydown",this.Ye,{capture:!0}),this.onShow()}constructor(t){this.me=new tt,this.ye=new et,this.Qe=new it(t),this.Pe=!0}ci(){document.removeEventListener("keydown",this.Ye,{capture:!0}),this.Ye=null,this.Oe.removeEventListener("dragstart",this.Ue,!1),this.Ue=null,this.Oe.removeEventListener("dragend",this.He,!1),this.He=null,this.Oe.removeEventListener("touchstart",this.Fe,!1),this.Fe=null,this.Oe.removeEventListener("touchmove",this.ze,!1),this.ze=null,this.Oe.removeEventListener("touchend",this.Ve,!1),this.Ve=null,this.Oe.removeEventListener("touchcancel",this.Ke,!1),this.Ke=null,this.Le.removeEventListener("click",this.Ge,!1),this.Qe.secondButtonText&&this.ke.removeEventListener("click",this.Ge,!1),this.Ge=null,this.Ae.removeEventListener("click",this.Xe,!1),this.Xe=null,this.Ie.removeEventListener("wheel",this.Re,{passive:!0}),this.Re=null,this.Ie.removeEventListener("contextmenu",this.We,!1),this.We=null,this.Ie.removeEventListener("dragover",this.Be,!1),this.Be=null,this.Ie.removeEventListener("touchstart",this.Se,!1),this.Ie.removeEventListener("touchmove",this.Se,!1),this.Ie.removeEventListener("touchend",this.Se,!1),this.Ie.removeEventListener("touchcancel",this.Se,!1),this.Se=null,this.Ie.removeEventListener("mouseup",this.Ce,!1),this.Ie.removeEventListener("mousemove",this.Ce,!1),this.Ie.removeEventListener("mousedown",this.Ce,!1),this.Ce=null,document.body.removeChild(this.Ie)}onCancel(){this.ci(),this.Ze("Canceled by user")}canClose(){return!0}onOk(t){return!!this.canClose()&&(this.ci(),this.qe(t),!0)}onShow(){}get title(){return""}get contentHTMLElements(){return[]}get footerHTMLElements(){return[]}show(){return new Promise(((t,e)=>this.hi(t,e)))}showWait(){this.xe.classList.remove("TravelNotes-Hidden"),this.Ae.classList.add("TravelNotes-Hidden")}hideWait(){this.xe.classList.add("TravelNotes-Hidden"),this.Ae.classList.remove("TravelNotes-Hidden")}showError(t){this.Ee.textContent="",g.sanitizeToHtmlElement(t,this.Ee),this.Ee.classList.remove("TravelNotes-Hidden")}hideError(){this.Ee.textContent="",this.Ee.classList.add("TravelNotes-Hidden")}get keyboardELEnabled(){return this.Pe}set keyboardELEnabled(t){this.Pe=t}get options(){return this.Qe}}{li;get ui(){const t=l.create("div");return this.li=l.create("select",null,t),this.options.selectOptionsData.forEach((t=>l.create("option",{text:t.text},this.li))),this.li.selectedIndex=0,t}constructor(t){super(t)}get title(){return this.options.title||""}get contentHTMLElements(){return[l.create("div",{textContent:this.options.text||""}),this.ui]}onOk(){super.onOk(this.options.selectOptionsData[this.li.selectedIndex].objId)}}const nt=new class{di(e){return(e+t.d540)%t.d360-t.d180}constructor(){}arcFromSummitArcArc(t,e,i){return Math.acos(Math.cos(e)*Math.cos(i)+Math.sin(e)*Math.sin(i)*Math.cos(t))}summitFromArcArcArc(t,e,i){return Math.acos((Math.cos(i)-Math.cos(t)*Math.cos(e))/(Math.sin(t)*Math.sin(e)))}pointsDistance(e,i){if(e[0]===i[0]&&e[1]===i[1])return 0;const s=e[0]*t.toRadians,r=i[0]*t.toRadians,n=(this.di(i[1])-this.di(e[1]))*t.toRadians;return Math.acos(Math.sin(s)*Math.sin(r)+Math.cos(s)*Math.cos(r)*Math.cos(n))*o}};class at{pi;_i;gi;vi;mi;wi;constructor(t){this.pi=h,this._i=t,this.gi=new Map,this.vi=new Map,this.mi=new Map,this.wi=0}get nodes3WaysCounter(){return this.wi}set nodes3WaysCounter(t){this.wi=t}get waysMap(){return this.gi}get nodesMap(){return this.vi}get stopsMap(){return this.mi}get newId(){return this.pi--}firstOf(t){return t[0]}lastOf(t){return t[t.length-1]}removeFrom(t,e){t.splice(t.indexOf(e),1)}fi(t){const e=this.vi.get(this.firstOf(t.nodesIds)),i=this.vi.get(this.lastOf(t.nodesIds));this.removeFrom(e.startingWaysIds,t.id),e.endingWaysIds.push(t.id),this.removeFrom(i.endingWaysIds,t.id),i.startingWaysIds.push(t.id),t.nodesIds.reverse()}mergeWays(t,e){const i=this.gi.get(t),s=this.gi.get(e);this.lastOf(i.nodesIds)===this.lastOf(s.nodesIds)?this.fi(s):this.firstOf(i.nodesIds)===this.firstOf(s.nodesIds)?this.fi(i):this.firstOf(i.nodesIds)===this.lastOf(s.nodesIds)&&(this.fi(i),this.fi(s));const r=this.vi.get(i.nodesIds.pop());r.startingWaysIds=[],r.endingWaysIds=[],i.nodesIds=i.nodesIds.concat(s.nodesIds),i.distance+=s.distance;const n=this.vi.get(this.lastOf(i.nodesIds));return this.removeFrom(n.endingWaysIds,s.id),n.endingWaysIds.push(i.id),this.gi.delete(s.id),i.id}D(t){const e=this.vi.get(t),i={id:this.newId,lat:e.lat,lon:e.lon,type:"node",startingWaysIds:[],endingWaysIds:[],isNode3Ways:e.isNode3Ways};return this.vi.set(i.id,i),i.id}cloneWay(t){const e=this.gi.get(t),i={id:this.newId,type:"way",nodesIds:[],distance:e.distance};return e.nodesIds.forEach((t=>i.nodesIds.push(this.D(t)))),this.vi.get(this.firstOf(i.nodesIds)).startingWaysIds.push(i.id),this.vi.get(this.lastOf(i.nodesIds)).endingWaysIds.push(i.id),this.gi.set(i.id,i),i.id}createMaps(t){this.gi.clear(),this.vi.clear(),this.mi.clear(),t.forEach((t=>{switch(t.type){case"way":t.nodesIds=t.nodes,delete t.nodes,2<=t.nodesIds.length&&(t.distance=0,this.gi.set(t.id,t));break;case"node":t.startingWaysIds=[],t.endingWaysIds=[],t.isNode3Ways=!1,this.vi.set(t.id,t);break;case"relation":t.members.forEach((t=>{"node"===t.type&&t.role&&"stop"===t.role&&this.mi.set(t.ref,t.ref)}))}})),this.mi.forEach((t=>{const e=this.vi.get(t);e?this.mi.set(t,e):(window.TaN.showInfo("the relation "+this._i+" have nodes not positionned on the railway ( node "+t+")."),this.mi.delete(t))})),this.gi.forEach((t=>{this.vi.get(this.firstOf(t.nodesIds)).startingWaysIds.push(t.id),this.vi.get(this.lastOf(t.nodesIds)).endingWaysIds.push(t.id);let e=null;t.nodesIds.forEach((i=>{const s=this.vi.get(i);e&&(t.distance+=nt.pointsDistance([s.lat,s.lon],[e.lat,e.lon])),e=s}))}))}}class ot{yi;bi(t,e,i){t.isNode3Ways||e.isNode3Ways||i.push({distance:nt.pointsDistance([t.lat,t.lon],[e.lat,e.lon]),nodesId:[t.id,e.id]})}Ti(){const t=[],e=Array.from(this.yi.waysMap.values());let i=1;e.forEach((s=>{for(let r=i;r<e.length;r++){const i=[];i.push(this.yi.nodesMap.get(this.yi.firstOf(s.nodesIds))),i.push(this.yi.nodesMap.get(this.yi.lastOf(s.nodesIds))),i.push(this.yi.nodesMap.get(this.yi.firstOf(e[r].nodesIds))),i.push(this.yi.nodesMap.get(this.yi.lastOf(e[r].nodesIds))),this.bi(i[0],i[2],t),this.bi(i[0],i[3],t),this.bi(i[1],i[2],t),this.bi(i[1],i[3],t)}i++}));let s=t[0];t.forEach((t=>{t.distance<s.distance&&(s=t)}));const r={id:this.yi.newId,type:"way",nodesIds:s.nodesId,distance:s.distance};this.yi.waysMap.set(r.id,r);const n=this.yi.nodesMap.get(s.nodesId[0]),a=n.startingWaysIds.concat(n.endingWaysIds)[0];n.startingWaysIds.push(r.id);const o=this.yi.nodesMap.get(s.nodesId[1]),h=o.startingWaysIds.concat(o.endingWaysIds)[0];o.endingWaysIds.push(r.id),this.yi.mergeWays(this.yi.mergeWays(r.id,a),h),this.yi.waysMap.size>2*this.yi.nodes3WaysCounter+1&&this.Ti()}constructor(t){this.yi=t}removeHoles(){this.Ti()}}class ht{_i;Mi;ji;yi;Ni(){this.Mi.forEach((t=>{let e=Number.MAX_VALUE,i=null;const s=t.startingWaysIds.concat(t.endingWaysIds);s.forEach((t=>{const s=this.yi.waysMap.get(t);s.distance<e&&(e=s.distance,i=s)})),this.yi.removeFrom(s,i.id);const r=this.yi.waysMap.get(this.yi.cloneWay(i.id));let n=null;this.yi.firstOf(i.nodesIds)===t.id?(r.nodesIds.pop(),r.nodesIds.push(this.yi.lastOf(i.nodesIds)),n=this.yi.firstOf(r.nodesIds)):(r.nodesIds.shift(),r.nodesIds.unshift(this.yi.firstOf(i.nodesIds)),n=this.yi.lastOf(r.nodesIds));const a=this.yi.waysMap.get(s[1]);a.nodesIds[a.nodesIds.indexOf(t.id)]=n,this.yi.mergeWays(this.yi.mergeWays(this.yi.mergeWays(i.id,r.id),s[0]),a.id)}))}Ii(t){let e=null,i=null,s=Number.MAX_VALUE,r=Number.MAX_VALUE;this.yi.stopsMap.forEach((t=>{let n=nt.pointsDistance([t.lat,t.lon],this.ji.wayPoints.first.latLng);n<s&&(s=n,e=t),n=nt.pointsDistance([t.lat,t.lon],this.ji.wayPoints.last.latLng),n<r&&(r=n,i=t)})),t.itinerary.itineraryPoints.removeAll(),t.itinerary.maneuvers.removeAll(),t.itinerary.hasProfile=!1,t.itinerary.ascent=0,t.itinerary.descent=0;let n=0,a=!1;Array.from(this.yi.waysMap.values())[0].nodesIds.forEach((s=>{if(0!==n||s!==e.id&&s!==i.id?2!==n||s!==e.id&&s!==i.id||(n=3):(n=1,a=s===i.id),0<n&&4>n){const r=new A,n=this.yi.nodesMap.get(s);r.latLng=[n.lat,n.lon],t.itinerary.itineraryPoints.add(r);const a=this.yi.stopsMap.get(s);if(a){const s=new L;let n=null;a.tags&&a.tags.name&&(n=a.tags.name,s.instruction=n+"&nbsp;:&nbsp;"),a.id===e.id?(n&&(t.wayPoints.first.name=n),s.iconName="kTrainStart",s.instruction+="Monter dans le train"):a.id===i.id?(n&&(t.wayPoints.last.name=n),s.iconName="kTrainEnd",s.instruction+="Descendre du train"):(s.iconName="kTrainContinue",s.instruction+="Rester dans le train"),s.distance=0,s.duration=0,s.itineraryPointObjId=r.objId,t.itinerary.maneuvers.add(s)}}1===n&&(n=2),3===n&&(n=4)})),a&&(t.itinerary.itineraryPoints.reverse(),t.itinerary.maneuvers.reverse()),t.distance=0;const o=t.itinerary.maneuvers.iterator;o.done;let h=o.value;o.done;const c=t.itinerary.itineraryPoints.iterator;c.done;let l=c.value;for(;!c.done;)c.value.distance=0,l.distance=nt.pointsDistance(l.latLng,c.value.latLng),t.distance+=l.distance,h.distance+=l.distance,o.value.itineraryPointObjId===c.value.objId&&(h=o.value,h.distance=0,o.done),l=c.value}constructor(t,e){this.ji=t,this._i=e,this.yi=new at(e),this.Mi=[]}buildRoute(t,e,i){this.Mi=[],this.yi.nodes3WaysCounter=0,this.yi.createMaps(t.elements);let s=!1;this.yi.nodesMap.forEach((t=>{const e=t.startingWaysIds.concat(t.endingWaysIds);switch(e.length){case 0:case 1:break;case 2:this.yi.mergeWays(e[0],e[1]);break;case 3:t.isNode3Ways=!0,this.Mi.push(t),this.yi.nodes3WaysCounter++;break;default:s=!0,window.TaN.showInfo("A node with more than 3 ways is found : "+t.id+" - the relation "+this._i+" - ways "+t.startingWaysIds.concat(t.endingWaysIds))}})),s?i(new Error("A node with more than 3 ways was found in the relation.See the console for more infos")):(this.yi.waysMap.size>2*this.yi.nodes3WaysCounter+1&&(new ot(this.yi).removeHoles(),window.TaN.showInfo("Holes found in the OSM relation number "+this._i+". Try to correct OSM data.")),0<this.yi.nodes3WaysCounter&&this.Ni(),this.Ii(this.ji),e(this.ji))}}window.TaN.addProvider(class extends class{Di;ji;Ei(t,e){}constructor(){this.Di="fr"}getPromiseRoute(t){return this.ji=t,new Promise(((t,e)=>this.Ei(t,e)))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get userLanguage(){return this.Di}set userLanguage(t){this.Di=t}}{ji;xi(t,e,i){new ht(this.ji).buildRoute(t,e,i)}Ai(t){return window.TaN.overpassApiUrl+"?data=[out:json];rel("+t.toFixed(0)+');way(r)->.e;way.e["railway"="rail"];(._;>;rel('+t.toFixed(0)+"););out;"}Li(t){if(0===t.elements.length)return Promise.reject(new Error("No relations found"));const e=[];t.elements.forEach((t=>{e.push(new st(t.tags.name,t.id))}));return new rt({title:"Relations",text:"select a relation : ",selectOptionsData:e}).show()}get Oi(){return window.TaN.overpassApiUrl+'?data=[out:json];node["public_transport"="stop_position"]["train"="yes"](around:400.0,'+this.ji.wayPoints.first.lat.toFixed(r.fixed)+","+this.ji.wayPoints.first.lng.toFixed(r.fixed)+')->.s;rel(bn.s)->.s;node["public_transport"="stop_position"]["train"="yes"](around:400.0,'+this.ji.wayPoints.last.lat.toFixed(r.fixed)+","+this.ji.wayPoints.last.lng.toFixed(r.fixed)+")->.e;rel(bn.e)->.e;rel.e.s;out tags;"}Ei(t,e){fetch(this.Oi).then((i=>{200===i.status&&i.ok?i.json().then((t=>this.Li(t))).then((t=>fetch(this.Ai(t)))).then((i=>{200===i.status&&i.ok?i.json().then((i=>this.xi(i,t,e))):e(new Error("An error occurs..."))})).catch((()=>e(new Error("An error occurs...")))):e(new Error("An error occurs..."))})).catch((()=>{e()}))}constructor(){super()}getPromiseRoute(t){return this.ji=t,new Promise(((t,e)=>this.Ei(t,e)))}get icon(){return'data:image/svg+xml;utf8,<svg viewBox="-3 -3 20 20" xmlns="http://www.w3.org/2000/svg"> <g fill="rgb(128,0,0)"><path d="M 5,0 C 3.025911,-0.0084 1,3 1,7 l 0,2 c 0,1 1,2 2,2 l 8,0 c 1,0 2,-1 2,-2 L 13,7 C 13,3 11,0 9,0 z m -1,3 6,0 c 0,0 1,1 1,3 L 3.03125,6 C 2.994661,3.9916 4,3 4,3 z M 3,8 6,8 6,9 3,9 z m 5,0 3,0 0,1 -3,0 z m -6,4 -1,2 3,0 1,-2 z m 7,0 1,2 3,0 -1,-2 z"/></g></svg>'}get name(){return"PublicTransport"}get title(){return"Public Transport on OpenStreetMap"}get transitModes(){return["train"]}get providerKeyNeeded(){return!1}})}();
/**
 * 
 * @source: https://github.com/wwwouaiebe/TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * travelnotes - version 3.1.0-dev
 * Build 01180 - 2021-11-14T20:24:03+0100 
 * Copyright 2017 2021 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";class t{static get d0(){return 0}static get d90(){return 90}static get d180(){return 180}static get d270(){return 270}static get d360(){return 360}static get d540(){return 540}static get toRadians(){return Math.PI/180}static get fromRadians(){return 180/Math.PI}}class e{static get fixed(){return 2}static get invalid(){return-1}static get defaultValue(){return 0}static get metersInKm(){return 1e3}}class r{static get fixed(){return 2}static get defaultValue(){return 0}}class i{static get defaultValue(){return 0}static get fixed(){return 6}static get maxLat(){return 90}static get minLat(){return-90}static get maxLng(){return 180}static get minLng(){return-180}}class s{static get notEdited(){return 0}static get editedNoChange(){return 1}static get editedChanged(){return 2}}const n=new class{t(e){return(e+t.d540)%t.d360-t.d180}constructor(){}arcFromSummitArcArc(t,e,r){return Math.acos(Math.cos(e)*Math.cos(r)+Math.sin(e)*Math.sin(r)*Math.cos(t))}summitFromArcArcArc(t,e,r){return Math.acos((Math.cos(r)-Math.cos(t)*Math.cos(e))/(Math.sin(t)*Math.sin(e)))}pointsDistance(e,r){if(e[0]===r[0]&&e[1]===r[1])return 0;const i=e[0]*t.toRadians,s=r[0]*t.toRadians,n=(this.t(r[1])-this.t(e[1]))*t.toRadians;return 6371e3*Math.acos(Math.sin(i)*Math.sin(s)+Math.cos(i)*Math.cos(s)*Math.cos(n))}};class a{static i=0;static get nextObjId(){return++a.i}}const o="2.3.0";class h{o="";h=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];l=[];constructor(t,e){if(-1===this.h.indexOf(t))throw new Error("Invalid ObjType name : "+t);this.o=t,this.l=e,Object.freeze(this.l)}get name(){return this.o}get version(){return o}get properties(){return this.l}get jsonObject(){return{name:this.o,version:o}}validate(t){if(!Object.getOwnPropertyNames(t).includes("name"))throw new Error("No name for "+this.o);if(this.o!==t.name)throw new Error("Invalid name for "+this.o);if(!Object.getOwnPropertyNames(t).includes("version"))throw new Error("No version for "+this.o)}}class l{u;g(){this.u.routes.forEach((t=>{t.dashArray=0,t.hidden=!1}))}_(){this.u.routes.forEach((t=>{t.edited=s.notEdited}))}p(){this._(),this.u.editedRoute={name:"",wayPoints:[{name:"",lat:0,lng:0,objId:2,objType:{name:"WayPoint",version:"1.4.0"}},{name:"",lat:0,lng:0,objId:3,objType:{name:"WayPoint",version:"1.4.0"}}],notes:[],itinerary:{itineraryPoints:[],maneuvers:[],provider:"",transitMode:"",objId:1,objType:{name:"Itinerary",version:"1.4.0"}},width:3,color:"_private_ff0000",dashArray:0,chain:!0,distance:0,duration:0,edited:s.notEdited,hidden:!1,chainedDistance:0,objId:4,objType:{name:"Route",version:"1.4.0"}}}v(){if(this.u.userData.layerId){const t=[{layerId:"0",layerName:"OSM - Color"},{layerId:"1",layerName:"OSM - Black and White"},{layerId:"2",layerName:"Thunderforest - Transport"},{layerId:"3",layerName:"Thunderforest - OpenCycleMap"},{layerId:"4",layerName:"Thunderforest - Outdoors"},{layerId:"5",layerName:"Esri - Aerial view"},{layerId:"6",layerName:"Kartverket - Norway"},{layerId:"7",layerName:"IGN-NGI - Belgium now"},{layerId:"12",layerName:"Thunderforest - Landscape"},{layerId:"24",layerName:"Lantmäteriet - Sweden"},{layerId:"25",layerName:"Maanmittauslaitos - Finland"}].find((t=>t.layerId===this.u.userData.layerId));this.u.layerName=t?t.layerName:"OSM - Color"}else this.u.layerName="OSM - Color"}m(t){t.forEach((t=>{t.elev=r.defaultValue}))}A(){this.u.routes.forEach((t=>{t.itinerary.hasProfile=!1,t.itinerary.ascent=0,t.itinerary.descent=0,this.m(t.itinerary.itineraryPoints)})),this.u.editedRoute.itinerary.hasProfile=!1,this.u.editedRoute.itinerary.ascent=0,this.u.editedRoute.itinerary.descent=0,this.m(this.u.editedRoute.itinerary.itineraryPoints)}N(t){t.itinerary.maneuvers.forEach((t=>{"kArriveDefault"===t.iconName&&(t.distance=e.defaultValue)}))}j(t){t.wayPoints.forEach((t=>{t.address=t.name,t.name=""}))}I(){this.u.routes.forEach((t=>{t.editionStatus=t.edited,this.N(t),this.j(t)})),this.u.editedRoute.editionStatus=this.u.editedRoute.edited,this.N(this.u.editedRoute),this.j(this.u.editedRoute)}M(t){return t.replaceAll(/style='color:white;background-color:red'/g,"class='TravelNotes-Note-WhiteRed'").replaceAll(/style='color:white;background-color:green'/g,"class='TravelNotes-Note-WhiteGreen'").replaceAll(/style='color:white;background-color:blue'/g,"class='TravelNotes-Note-WhiteBlue'").replaceAll(/style='color:white;background-color:brown'/g,"class='TravelNotes-Note-WhiteBrown'").replaceAll(/style='color:white;background-color:black'/g,"class='TravelNotes-Note-WhiteBlack'").replaceAll(/style='border:solid 0.1em'/g,"class='TravelNotes-Note-BlackWhite'").replaceAll(/style='background-color:white;'/g,"class='TravelNotes-Note-Knooppunt'").replaceAll(/style='fill:green;font:bold 120px sans-serif;'/g,"").replaceAll(/style='fill:none;stroke:green;stroke-width:10;'/g,"")}T(t){"string"==typeof t.iconHeight&&(t.iconHeight=Number.parseInt(t.iconHeight)),"string"==typeof t.iconWidth&&(t.iconWidth=Number.parseInt(t.iconWidth)),t.iconContent=this.M(t.iconContent),t.popupContent=this.M(t.popupContent),t.tooltipContent=this.M(t.tooltipContent),t.phone=this.M(t.phone),t.address=this.M(t.address)}k(){this.u.notes.forEach((t=>{this.T(t)})),this.jsonTravel.routes.forEach((t=>{t.notes.forEach((t=>{this.T(t)}))}))}O(){switch(this.u.objType.version){case"1.0.0":this.g();case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":this.p();case"1.5.0":this.v();case"1.6.0":this.A();case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":this.I();case"1.12.0":case"1.13.0":this.k();case"2.0.0":case"2.1.0":case"2.2.0":this.u.objType.version="2.3.0";break;default:throw new Error("invalid version for travel")}}constructor(){}update(t){t.objType.version!==o&&(this.u=t,this.O())}}class c{constructor(){}validateObject(t){if(!Object.getOwnPropertyNames(t).includes("objType"))throw new Error("No objType for "+this.objType.name);this.objType.validate(t.objType),"Travel"===this.objType.name&&this.objType.version!==t.objType.version&&(new l).update(t);const e=Object.getOwnPropertyNames(t);return this.objType.properties.forEach((t=>{if(!e.includes(t))throw new Error("No "+t+" for "+this.objType.name)})),t}}class u extends c{static S=new h("ItineraryPoint",["lat","lng","distance","elev","objId"]);P=i.defaultValue;C=i.defaultValue;R=e.defaultValue;V=r.defaultValue;i=-1;constructor(){super(),this.i=a.nextObjId}get lat(){return this.P}set lat(t){this.P="number"==typeof t?t:i.defaultValue}get lng(){return this.C}set lng(t){this.C="number"==typeof t?t:i.defaultValue}get distance(){return this.R}set distance(t){this.R="number"==typeof t?t:e.defaultValue}get elev(){return this.V}set elev(t){this.V="number"==typeof t?t:i.defaultValue}get latLng(){return[this.lat,this.lng]}set latLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.P=t[0],this.C=t[1]):(this.P=i.defaultValue,this.C=i.defaultValue)}get objType(){return u.S}get objId(){return this.i}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(i.fixed)),lng:parseFloat(this.lng.toFixed(i.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),elev:parseFloat(this.elev.toFixed(r.fixed)),objId:this.i,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.lat=e.lat,this.lng=e.lng,this.distance=e.distance,this.elev=e.elev,this.i=a.nextObjId}}class d{L;D;constructor(t,e){this.L=t,this.D=e}get url(){return this.L}get errorsString(){return this.D}}class g{B;D;constructor(t,e){this.B=t,this.D=e}get htmlString(){return this.B}get errorsString(){return this.D}}class _{U=new Map;constructor(){this.U.set("a",["href","target"]),this.U.set("div",[]),this.U.set("del",[]),this.U.set("em",[]),this.U.set("figcaption",[]),this.U.set("figure",[]),this.U.set("h1",[]),this.U.set("h2",[]),this.U.set("h3",[]),this.U.set("h4",[]),this.U.set("h5",[]),this.U.set("h6",[]),this.U.set("hr",[]),this.U.set("img",["src","alt","width","height"]),this.U.set("ins",[]),this.U.set("li",[]),this.U.set("mark",[]),this.U.set("ol",[]),this.U.set("p",[]),this.U.set("s",[]),this.U.set("small",[]),this.U.set("strong",[]),this.U.set("span",[]),this.U.set("sub",[]),this.U.set("sup",[]),this.U.set("ul",[]),this.U.set("svg",["xmlns","viewBox","class"]),this.U.set("text",["x","y","text-anchor"]),this.U.set("polyline",["points","class","transform"]),this.U.set("#text",[])}getValidAttributesNames(t){return this.U.get(t).concat(["id","class","dir","title"])}getValidNodeName(t){const e=t.toLowerCase();return this.U.get(e)?e:""}}class p{W="";F="";static K=new _;G(t){return t.replaceAll(/\u003c/g,"&lt;").replaceAll(/\u003e/g,"&gt;").replaceAll(/\u0022/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}H(t,e){const r=this.sanitizeToUrl(t,e).url;""===r&&""!==t?this.F+="\nAn invalid url ("+t+") was removed from a "+e+" attribute":this.W+=" "+e+'="'+r+'"'}q(t,e){p.K.getValidAttributesNames(e).forEach((e=>{t.hasAttributeNS(null,e)&&(this.W+=" "+e+'="'+this.G(t.getAttributeNS(null,e))+'"',t.removeAttributeNS(null,e))}))}J(t,e){t.hasAttribute("target")&&(this.W+=' rel="noopener noreferrer"'),p.K.getValidAttributesNames(e).forEach((e=>{t.hasAttribute(e)&&("href"===e||"src"===e?this.H(t.getAttribute(e),e):this.W+=" "+e+'="'+this.G(t.getAttribute(e))+'"',t.removeAttribute(e))}))}X(t){for(let e=0;e<t.attributes.length;e++)"rel"!==t.attributes[e].name&&(this.F+="\nAn unsecure attribute "+t.attributes[e].name+'="'+t.attributes[e].value+'" was removed.')}Y(t){const e=t.childNodes;for(let r=0;r<e.length;r++){const e=t.childNodes[r],i=p.K.getValidNodeName(e.nodeName);""===i?this.F+="\nAn invalid tag "+e.nodeName+" was removed":"#text"===i?this.W+=this.G(e.nodeValue):(this.W+="<"+i,"svg"===i||"text"===i||"polyline"===i?this.q(e,i):this.J(e,i),this.W+=">",this.Y(e),this.W+="</"+i+">",e.attributes&&this.X(e))}}Z(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg",e);return p.K.getValidAttributesNames(e).forEach((e=>{t.hasAttributeNS(null,e)&&(r.setAttributeNS(null,e,t.getAttributeNS(null,e)),t.removeAttributeNS(null,e))})),r}$(t,e){const r=document.createElement(e);return p.K.getValidAttributesNames(e).forEach((e=>{if(t.hasAttribute(e))if("href"===e||"src"===e){const i=this.sanitizeToUrl(t.getAttribute(e),e).url;""!==i&&r.setAttribute(e,i)}else r.setAttribute(e,t.getAttribute(e))})),t.hasAttribute("target")&&r.setAttribute("rel","noopener noreferrer"),r}tt(t,e){const r=t.childNodes;for(let i=0;i<r.length;i++){const r=t.childNodes[i],s=p.K.getValidNodeName(r.nodeName);if("#text"===s)e.appendChild(document.createTextNode(r.nodeValue));else if(""!==s){const t="svg"===s||"text"===s||"polyline"===s?this.Z(r,s):this.$(r,s);e.appendChild(t),this.tt(r,t)}}}constructor(){}sanitizeToHtmlElement(t,e){const r=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html"),i=new DocumentFragment;r&&"#document"===r.nodeName?(this.tt(r.body.firstChild,i),e.appendChild(i)):e.textContent=""}clone(t){const e=document.createElement(t.tagName);return this.tt(t,e),e}sanitizeToHtmlString(t){this.W="",this.F="";const e=(new DOMParser).parseFromString("<div>"+t.replace("&nbsp;","਀")+"</div>","text/html");return e&&"#document"===e.nodeName?(this.Y(e.body.firstChild),new g(this.W,this.F)):new g("","Parsing error")}sanitizeToUrl(t,e){const r=e||"href",i=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!i||"#document"!==i.nodeName)return new d("","Parsing error");const s=i.body.firstChild;let n="";for(let t=0;t<s.childNodes.length;t++){if("#text"!==s.childNodes[t].nodeName)return new d("","Invalid characters found in the url");n+=s.childNodes[t].nodeValue}if(n=n.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),n!==t)return new d("","Invalid characters found in the url");const a=["https:"];if("http:"!==window.location.protocol&&"href"!==r||a.push("http:"),"href"===r){a.push("mailto:"),a.push("sms:"),a.push("tel:");const t=n.match(/^\u0023\w*/);if(t&&n===t[0])return new d(n,"")}"src"===r&&a.push("data:");let o=null;try{o=new URL(n)}catch(t){return new d("","Invalid url string")}if(-1===a.indexOf(o.protocol))return new d("","Invalid protocol "+o.protocol);if(-1!==["sms:","tel:"].indexOf(o.protocol))return o.pathname.match(/^\+[0-9,*,\u0023]*$/)?new d(n,""):new d("","Invalid sms: or tel: url");try{encodeURIComponent(o.href)}catch(t){return new d("","Invalid character in url")}return new d(n,"")}sanitizeToJsString(t){const e=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!e||"#document"!==e.nodeName)return"";const r=e.body.firstChild;let i="";for(let t=0;t<r.childNodes.length;t++){if("#text"!==r.childNodes[t].nodeName)return"";i+=r.childNodes[t].nodeValue}return i=i.replaceAll(/</g,"≺").replaceAll(/>/g,"≻").replaceAll(/"/g,"″").replaceAll(/\u0027/g,"′"),i}sanitizeToColor(t){const e=t.match(/^\u0023[0-9,A-F,a-f]{6}$/);return e?e[0]:null}}const v=new p;class m extends c{static S=new h("Maneuver",["iconName","instruction","distance","duration","itineraryPointObjId","objId"]);et="";rt="";it=-1;R=e.defaultValue;st=e.defaultValue;i=-1;constructor(){super(),this.i=a.nextObjId}get iconName(){return this.et}set iconName(t){this.et="string"==typeof t?v.sanitizeToJsString(t):""}get instruction(){return this.rt}set instruction(t){this.rt="string"==typeof t?v.sanitizeToJsString(t):""}get itineraryPointObjId(){return this.it}set itineraryPointObjId(t){this.it="number"==typeof t?t:-1}get distance(){return this.R}set distance(t){this.R="number"==typeof t?t:e.defaultValue}get duration(){return this.st}set duration(t){this.st="number"==typeof t?t:e.defaultValue}get objType(){return m.S}get objId(){return this.i}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this.i,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.iconName=e.iconName,this.instruction=e.instruction,this.distance=e.distance,this.duration=e.duration,this.itineraryPointObjId=e.itineraryPointObjId,this.i=a.nextObjId}}const y=Math.PI/2;class f extends class{nt;ot;ht(t,e){}constructor(){this.nt="fr"}getPromiseRoute(t){return this.ot=t,new Promise(((t,e)=>this.ht(t,e)))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get userLanguage(){return this.nt}set userLanguage(t){this.nt=t}}{ot;static get lt(){return Object.freeze({en:Object.freeze({kStart:"Start",kContinue:"Continue",kEnd:"Stop"}),fr:Object.freeze({kStart:"Départ",kContinue:"Continuer",kEnd:"Arrivée"})})}static get ct(){return Object.freeze({kStart:"kDepartDefault",kContinue:"kContinueStraight",kEnd:"kArriveDefault"})}ut(t,e){const r=new m;r.iconName=f.ct[e],r.instruction=f.lt[this.userLanguage]?f.lt[this.userLanguage][e]:f.lt.en[e],r.duration=0,r.itineraryPointObjId=t,this.ot.itinerary.maneuvers.add(r)}dt(t){const e=new u;return e.latLng=t,this.ot.itinerary.itineraryPoints.add(e),e.objId}gt(e,r){const i=[e.lat*t.toRadians,e.lng*t.toRadians],s=[r.lat*t.toRadians,r.lng*t.toRadians],a=(r.lng-e.lng+t.d360)%t.d360>t.d180?-1:1,o=n.arcFromSummitArcArc(s[1]-i[1],y-i[0],y-s[0]);if(.1>o*t.fromRadians)return;const h=n.summitFromArcArcArc(y-i[0],o,y-s[0]),l=[];for(let e=1;e<=64;e++){const r=o*e/64,s=n.arcFromSummitArcArc(h,y-i[0],r),c=n.summitFromArcArcArc(y-i[0],s,r),d=new u;d.latLng=[(y-s)*t.fromRadians,(i[1]+a*c)*t.fromRadians],l.push(d)}r.lng=l.pop().lng,l.forEach((t=>this.ot.itinerary.itineraryPoints.add(t)))}_t(){let e=this.ot.wayPoints.iterator,r=null;for(;!e.done;)e.first?(r=e.value,this.ut(this.dt(e.value.latLng),"kStart")):(this.gt(r,e.value),this.ut(this.dt(e.value.latLng),e.last?"kEnd":"kContinue"),r=e.value);let i=-Number.MAX_VALUE,s=this.ot.itinerary.itineraryPoints.iterator;for(;!s.done;)i=Math.max(i,s.value.lng);const n=i%t.d360-i;for(s=this.ot.itinerary.itineraryPoints.iterator;!s.done;)s.value.lng+=n;for(e=this.ot.wayPoints.iterator;!e.done;)e.value.lng+=n}vt(){const e=[this.ot.wayPoints.first.lat*t.toRadians,this.ot.wayPoints.first.lng*t.toRadians],r=[this.ot.wayPoints.last.lat*t.toRadians,this.ot.wayPoints.last.lng*t.toRadians],i=n.arcFromSummitArcArc(e[1]-r[1],y-e[0],y-r[0]),s=360,a=[];for(let r=0;r<=s;r++){const o=Math.PI/720+Math.PI*r/s,h=n.arcFromSummitArcArc(o,i,y-e[0]),l=n.summitFromArcArcArc(y-e[0],h,i);let c=new u;c.latLng=[(y-h)*t.fromRadians,(e[1]+l)*t.fromRadians],a.push(c),c=new u,c.latLng=[(y-h)*t.fromRadians,(e[1]-l)*t.fromRadians],a.unshift(c),r===s&&(this.ut(c.objId,"kStart"),c=new u,c.latLng=[(y-h)*t.fromRadians,(e[1]-l)*t.fromRadians],this.ut(c.objId,"kEnd"),a.push(c))}a.forEach((t=>this.ot.itinerary.itineraryPoints.add(t)))}yt(t,e){try{switch(this.ot.itinerary.itineraryPoints.removeAll(),this.ot.itinerary.maneuvers.removeAll(),this.ot.itinerary.hasProfile=!1,this.ot.itinerary.ascent=0,this.ot.itinerary.descent=0,this.ot.itinerary.transitMode){case"line":this._t();break;case"circle":this.vt()}t(this.ot)}catch(t){e(t)}}constructor(){super()}getPromiseRoute(t){return this.ot=t,new Promise(((t,e)=>this.yt(t,e)))}get icon(){return'data:image/svg+xml;utf8,<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <circle cx="12" cy="12" r="3" stroke="rgb(0,0,0)" fill="transparent" /> <line x1="5" y1="17" x2="11" y2="2" stroke="rgb(0,0,0)" /> <line x1="3" y1="6" x2="17" y2="9" stroke="rgb(191,0,0)" /> <line x1="3" y1="16" x2="17" y2="5" stroke="rgb(255,204,0)" /> </svg>'}get name(){return"Polyline"}get title(){return"Polyline & Circle"}get transitModes(){return["line","circle"]}get providerKeyNeeded(){return!1}}window.TaN.addProvider(f)}();
/**
 * 
 * @source: https://github.com/wwwouaiebe/TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * travelnotes - version 5.0.0-dev
 * Build 43 - Mon Jan 05 2026 15:38:06 GMT+0100 (heure normale d’Europe centrale)
 * Copyright 2019 2026 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
*/


!function(){"use strict";class t{static get fixed(){return 2}static get invalid(){return-1}static get defaultValue(){return 0}static get metersInKm(){return 1e3}}class e{static get fixed(){return 2}static get defaultValue(){return 0}}class r{static get defaultValue(){return 0}static get fixed(){return 6}static get maxLat(){return 90}static get minLat(){return-90}static get maxLng(){return 180}static get minLng(){return-180}}class i{static get notEdited(){return 0}static get editedNoChange(){return 1}static get editedChanged(){return 2}}class a{static get#t(){return.5}static get#e(){return 5}static get#r(){return 10}static get#i(){return 31}static get#a(){return 32}static get#n(){return 63}#s(t){return Math.floor(Math.abs(t)+a.#t)*(0<=t?1:-1)}#o(t,e,r){const i=this.#s(t*r),n=this.#s(e*r);let s=i-n;s<<=1,0>i-n&&(s=~s);let o="";for(;a.#a<=s;)o+=String.fromCharCode((a.#a|s&a.#i)+a.#n),s>>=a.#e;return o+=String.fromCharCode(s+a.#n),o}#l;#h(t){let e=null,r=0,i=0;do{e=t.charCodeAt(this.#l++)-a.#n,i|=(e&a.#i)<<r,r+=a.#e}while(a.#a<=e);return 1&i?~(i>>1):i>>1}constructor(){Object.freeze(this)}encode(t,e){if(!t.length)return"";const r=e.length,i=Array.from(e,t=>Math.pow(a.#r,t));let n="";for(let e=0;e<r;e++)n+=this.#o(t[0][e],0,i[e]);for(let e=1;e<t.length;e++){const a=t[e],s=t[e-1];for(let t=0;t<r;t++)n+=this.#o(a[t],s[t],i[t])}return n}decode(t,e){const r=e.length;if(!t||0===t.length)return[];this.#l=0;const i=[],n=Array.from(e,t=>Math.pow(a.#r,t)),s=new Array(r).fill(0);for(;this.#l<t.length;){const e=new Array(r).fill(0);for(let i=0;i<r;i++)s[i]+=this.#h(t),e[i]=s[i]/n[i];i.push(e)}return i}}class n{static#u=0;static get nextObjId(){return++n.#u}}const s="5.0.0";class o{#d="";#c=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];#g=[];constructor(t,e){if(Object.freeze(this),-1===this.#c.indexOf(t))throw new Error("Invalid ObjType name : "+t);this.#d=t,this.#g=e,Object.freeze(this.#g)}get name(){return this.#d}get version(){return s}get properties(){return this.#g}get jsonObject(){return{name:this.#d,version:s}}validate(t){if(!Object.getOwnPropertyNames(t).includes("name"))throw new Error("No name for "+this.#d);if(this.#d!==t.name)throw new Error("Invalid name for "+this.#d);if(!Object.getOwnPropertyNames(t).includes("version"))throw new Error("No version for "+this.#d)}}class l{#f;#p(){this.#f.routes.forEach(t=>{t.dashArray=0,t.hidden=!1})}#m(){this.#f.routes.forEach(t=>{t.edited=i.notEdited})}#v(){this.#m(),this.#f.editedRoute={name:"",wayPoints:[{name:"",lat:0,lng:0,objId:2,objType:{name:"WayPoint",version:"1.4.0"}},{name:"",lat:0,lng:0,objId:3,objType:{name:"WayPoint",version:"1.4.0"}}],notes:[],itinerary:{itineraryPoints:[],maneuvers:[],provider:"",transitMode:"",objId:1,objType:{name:"Itinerary",version:"1.4.0"}},width:3,color:"#ff0000",dashArray:0,chain:!0,distance:0,duration:0,edited:i.notEdited,hidden:!1,chainedDistance:0,objId:4,objType:{name:"Route",version:"1.4.0"}}}#y(){if(this.#f.userData.layerId){const t=[{layerId:"0",layerName:"OSM - Color"},{layerId:"1",layerName:"OSM - Black and White"},{layerId:"2",layerName:"Thunderforest - Transport"},{layerId:"3",layerName:"Thunderforest - OpenCycleMap"},{layerId:"4",layerName:"Thunderforest - Outdoors"},{layerId:"5",layerName:"Esri - Aerial view"},{layerId:"6",layerName:"Kartverket - Norway"},{layerId:"7",layerName:"IGN-NGI - Belgium now"},{layerId:"12",layerName:"Thunderforest - Landscape"},{layerId:"24",layerName:"Lantmäteriet - Sweden"},{layerId:"25",layerName:"Maanmittauslaitos - Finland"}].find(t=>t.layerId===this.#f.userData.layerId);this.#f.layerName=t?t.layerName:"OSM - Color"}else this.#f.layerName="OSM - Color"}#b(t){t.forEach(t=>{t.elev=e.defaultValue})}#N(){this.#f.routes.forEach(t=>{t.itinerary.hasProfile=!1,t.itinerary.ascent=0,t.itinerary.descent=0,this.#b(t.itinerary.itineraryPoints)}),this.#f.editedRoute.itinerary.hasProfile=!1,this.#f.editedRoute.itinerary.ascent=0,this.#f.editedRoute.itinerary.descent=0,this.#b(this.#f.editedRoute.itinerary.itineraryPoints)}#A(e){e.itinerary.maneuvers.forEach(e=>{"kArriveDefault"===e.iconName&&(e.distance=t.defaultValue)})}#j(t){t.wayPoints.forEach(t=>{t.address=t.name,t.name=""})}#T(){this.#f.routes.forEach(t=>{t.editionStatus=t.edited,this.#A(t),this.#j(t)}),this.#f.editedRoute.editionStatus=this.#f.editedRoute.edited,this.#A(this.#f.editedRoute),this.#j(this.#f.editedRoute)}#w(){this.#f.routes.forEach(t=>{t.dashIndex=t.dashArray}),this.#f.editedRoute.dashIndex=this.#f.editedRoute.dashArray}#k(t){return t.replaceAll(/style='color:white;background-color:red'/g,"class='TravelNotes-Note-WhiteRed'").replaceAll(/style='color:white;background-color:green'/g,"class='TravelNotes-Note-WhiteGreen'").replaceAll(/style='color:white;background-color:blue'/g,"class='TravelNotes-Note-WhiteBlue'").replaceAll(/style='color:white;background-color:brown'/g,"class='TravelNotes-Note-WhiteBrown'").replaceAll(/style='color:white;background-color:black'/g,"class='TravelNotes-Note-WhiteBlack'").replaceAll(/style='border:solid 0.1em'/g,"class='TravelNotes-Note-BlackWhite'").replaceAll(/style='background-color:white;'/g,"class='TravelNotes-Note-Knooppunt'").replaceAll(/style='fill:green;font:bold 120px sans-serif;'/g,"").replaceAll(/style='fill:none;stroke:green;stroke-width:10;'/g,"")}#R(t){"string"==typeof t.iconHeight&&(t.iconHeight=Number.parseInt(t.iconHeight)),"string"==typeof t.iconWidth&&(t.iconWidth=Number.parseInt(t.iconWidth)),t.iconContent=this.#k(t.iconContent),t.popupContent=this.#k(t.popupContent),t.tooltipContent=this.#k(t.tooltipContent),t.phone=this.#k(t.phone),t.address=this.#k(t.address)}#E(){this.#f.notes.forEach(t=>{this.#R(t)}),this.jsonTravel.routes.forEach(t=>{t.notes.forEach(t=>{this.#R(t)})})}#x(t){[[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kBusEnd"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0075"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kBusStart"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0076"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kFerryExit"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0077"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kFerryEnter"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0078"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kTrainEnd"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0079"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kTrainStart"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0080"></div>'],[/class="TravelNotes-MapNote TravelNotes-MapNoteCategory/g,'class="travelnotes-map-note travelnotes-map-note-category'],[/class="TravelNotes-SvgIcon/g,'class="travelnotes-svg-icon'],[/class="TravelNotes-OSM-Itinerary/g,'class="travelnotes-osm-itinerary'],[/class="TravelNotes-OSM-Highway TravelNotes-OSM-Highway/g,'class="travelnotes-osm-highway travelnotes-osm-highway'],[/class="TravelNotes-OSM-RcnRef/g,'class="travelnotes-osm-rcn-ref']].forEach(e=>{t.iconContent=t.iconContent.replaceAll(e[0],e[1])}),[[/class="TravelNotes-Note-WhiteRed/g,'class="travelnotes-note-white-red'],[/class="TravelNotes-Note-WhiteGreen/g,'class="travelnotes-note-white-green'],[/class="TravelNotes-Note-WhiteBlue/g,'class="travelnotes-note-white-blue'],[/class="TravelNotes-Note-WhiteBrown/g,'class="travelnotes-note-white-brown'],[/class="TravelNotes-Note-WhiteBlack/g,'class="travelnotes-note-white-black'],[/class="TravelNotes-Note-BlackWhite/g,'class="travelnotes-note-black-white']].forEach(e=>{t.iconContent=t.iconContent.replaceAll(e[0],e[1]),t.popupContent=t.popupContent.replaceAll(e[0],e[1]),t.tooltipContent=t.tooltipContent.replaceAll(e[0],e[1]),t.address=t.address.replaceAll(e[0],e[1]),t.phone=t.phone.replaceAll(e[0],e[1])})}#M(){const t=new Map;t.set("kArriveLeft","arrive-left"),t.set("kArriveRight","arrive-right"),t.set("kContinueLeft","continue-left"),t.set("kContinueRight","continue-right"),t.set("kContinueSharpLeft","continue-sharp-left"),t.set("kContinueSharpRight","continue-sharp-right"),t.set("kContinueSlightLeft","continue-slight-left"),t.set("kContinueSlightRight","continue-slight-right"),t.set("kContinueStraight","continue-straight"),t.set("kDepartDefault","depart-default"),t.set("kDepartLeft","depart-left"),t.set("kDepartRight","depart-right"),t.set("kEndOfRoadLeft","end-of-road-left"),t.set("kEndOfRoadRight","end-of-road-right"),t.set("kFerryEnter","ferry-enter"),t.set("kFerryExit","ferry-exit"),t.set("kForkLeft","fork-left"),t.set("kForkRight","fork-right"),t.set("kMergeDefault","merge-default"),t.set("kMergeLeft","merge-left"),t.set("kMergeRight","merge-right"),t.set("kNewNameLeft","new-name-left"),t.set("kNewNameRight","new-name-right"),t.set("kNewNameSharpLeft","new-name-sharp-left"),t.set("kNewNameSharpRight","new-name-sharp-right"),t.set("kNewNameSlightLeft","new-name-slight-left"),t.set("kNewNameSlightRight","new-name-slight-right"),t.set("kNewNameStraight","new-name-straight"),t.set("kOffRampLeft","off-ramp-left"),t.set("kOffRampRight","off-ramp-right"),t.set("kOnRampLeft","on-ramp-left"),t.set("kOnRampRight","on-ramp-right"),t.set("kRotaryLeft","rotary-left"),t.set("kRotaryRight","rotary-right"),t.set("kRoundaboutExit","roundabout-exit"),t.set("kRoundaboutLeft","roundabout-left"),t.set("kRoundaboutRight","roundabout-right"),t.set("kRoundaboutTurnLeft","roundabout-turn-left"),t.set("kRoundaboutTurnRight","roundabout-turn-right"),t.set("kRoundaboutTurnSharpLeft","roundabout-turn-sharp-left"),t.set("kRoundaboutTurnSharpRight","roundabout-turn-sharp-right"),t.set("kRoundaboutTurnSlightLeft","roundabout-turn-slight-left"),t.set("kRoundaboutTurnSlightRight","roundabout-turn-slight-right"),t.set("kRoundaboutTurnStraight","roundabout-turn-straight"),t.set("kStayLeft","stay-left"),t.set("kStayRight","stay-right"),t.set("kStayStraight","stay-straight"),t.set("kTurnLeft","turn-left"),t.set("kTurnRight","turn-right"),t.set("kTurnSharpLeft","turn-sharp-left"),t.set("kTurnSharpRight","turn-sharp-right"),t.set("kTurnSlightLeft","turn-slight-left"),t.set("kTurnSlightRight","turn-slight-right"),t.set("kTurnStraight","turn-straight"),t.set("kTurnUturn","turn-u-turn"),t.set("kUndefined","undefined"),t.set("kUturnLeft","u-turn-left"),t.set("kUturnRight","u-turn-right"),t.set("kTrainStart","train-start"),t.set("kTrainContinue","train-continue"),t.set("kTrainEnd","train-end"),this.#f.routes.forEach(e=>{e.itinerary.maneuvers.forEach(e=>{e.iconName=t.get(e.iconName)||"undefined"})})}#_(){this.#f.notes.forEach(t=>{this.#x(t)}),this.#f.routes.forEach(t=>{t.notes.forEach(t=>{this.#x(t)})})}#S(){switch(this.#f.objType.version){case"1.0.0":this.#p();case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":this.#v();case"1.5.0":this.#y();case"1.6.0":this.#N();case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":this.#T();case"1.12.0":case"1.13.0":this.#E();case"2.0.0":case"2.1.0":case"2.2.0":case"2.3.0":this.#w();case"2.4.0":this.#_(),this.#M(),this.#f.objType.version="5.0.0";break;default:throw new Error("invalid version for travel")}}constructor(){Object.freeze(this)}update(t){t.objType.version!==s&&(this.#f=t,this.#S())}}class h{constructor(){Object.freeze(this)}validateObject(t){if(!Object.getOwnPropertyNames(t).includes("objType"))throw new Error("No objType for "+this.objType.name);this.objType.validate(t.objType),"Travel"===this.objType.name&&this.objType.version!==t.objType.version&&(new l).update(t);const e=Object.getOwnPropertyNames(t);return this.objType.properties.forEach(t=>{if(!e.includes(t))throw new Error("No "+t+" for "+this.objType.name)}),t}}class u extends h{static#O=new o("ItineraryPoint",["lat","lng","distance","elev","objId"]);#I=r.defaultValue;#V=r.defaultValue;#L=t.defaultValue;#U=e.defaultValue;#u=-1;constructor(){super(),this.#u=n.nextObjId}get lat(){return this.#I}set lat(t){this.#I="number"==typeof t?t:r.defaultValue}get lng(){return this.#V}set lng(t){this.#V="number"==typeof t?t:r.defaultValue}get distance(){return this.#L}set distance(e){this.#L="number"==typeof e?e:t.defaultValue}get elev(){return this.#U}set elev(t){this.#U="number"==typeof t?t:r.defaultValue}get latLng(){return[this.lat,this.lng]}set latLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.#I=t[0],this.#V=t[1]):(this.#I=r.defaultValue,this.#V=r.defaultValue)}get objType(){return u.#O}get objId(){return this.#u}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),distance:parseFloat(this.distance.toFixed(t.fixed)),elev:parseFloat(this.elev.toFixed(e.fixed)),objId:this.#u,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.lat=e.lat,this.lng=e.lng,this.distance=e.distance,this.elev=e.elev,this.#u=n.nextObjId}}class d{#C=new Map;constructor(){Object.freeze(this),this.#C.set("a",["href","target"]),this.#C.set("div",[]),this.#C.set("del",[]),this.#C.set("em",[]),this.#C.set("figcaption",[]),this.#C.set("figure",[]),this.#C.set("h1",[]),this.#C.set("h2",[]),this.#C.set("h3",[]),this.#C.set("h4",[]),this.#C.set("h5",[]),this.#C.set("h6",[]),this.#C.set("hr",[]),this.#C.set("img",["src","alt","width","height"]),this.#C.set("ins",[]),this.#C.set("li",[]),this.#C.set("mark",[]),this.#C.set("ol",[]),this.#C.set("p",[]),this.#C.set("s",[]),this.#C.set("small",[]),this.#C.set("strong",[]),this.#C.set("span",[]),this.#C.set("sub",[]),this.#C.set("sup",[]),this.#C.set("ul",[]),this.#C.set("svg",["xmlns","viewBox","class"]),this.#C.set("text",["x","y","text-anchor"]),this.#C.set("polyline",["points","class","transform"]),this.#C.set("#text",[])}getValidAttributesNames(t){return this.#C.get(t).concat(["id","class","dir","title"])}getValidNodeName(t){const e=t.toLowerCase();return this.#C.get(e)?e:""}}class c{#z;#B;constructor(t,e){Object.freeze(this),this.#z=t,this.#B=e}get htmlString(){return this.#z}get errorsString(){return this.#B}}class g{#P;#B;constructor(t,e){Object.freeze(this),this.#P=t,this.#B=e}get url(){return this.#P}get errorsString(){return this.#B}}class f{#D="";#F="";static#H=new d;#W(t){return t.replaceAll(/\u003c/g,"&lt;").replaceAll(/\u003e/g,"&gt;").replaceAll(/\u0022/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}#K(t,e){const r=this.sanitizeToUrl(t,e).url;""===r&&""!==t?this.#F+="\nAn invalid url ("+t+") was removed from a "+e+" attribute":this.#D+=" "+e+'="'+r+'"'}#Q(t,e){f.#H.getValidAttributesNames(e).forEach(e=>{t.hasAttributeNS(null,e)&&(this.#D+=" "+e+'="'+this.#W(t.getAttributeNS(null,e))+'"',t.removeAttributeNS(null,e))})}#q(t,e){t.hasAttribute("target")&&(this.#D+=' rel="noopener noreferrer"'),f.#H.getValidAttributesNames(e).forEach(e=>{t.hasAttribute(e)&&("href"===e||"src"===e?this.#K(t.getAttribute(e),e):this.#D+=" "+e+'="'+this.#W(t.getAttribute(e))+'"',t.removeAttribute(e))})}#J(t){for(let e=0;e<t.attributes.length;e++)"rel"!==t.attributes[e].name&&(this.#F+="\nAn unsecure attribute "+t.attributes[e].name+'="'+t.attributes[e].value+'" was removed.')}#G(t){const e=t.childNodes;for(let r=0;r<e.length;r++){const e=t.childNodes[r],i=f.#H.getValidNodeName(e.nodeName);""===i?this.#F+="\nAn invalid tag "+e.nodeName+" was removed":"#text"===i?this.#D+=this.#W(e.nodeValue):(this.#D+="<"+i,"svg"===i||"text"===i||"polyline"===i?this.#Q(e,i):this.#q(e,i),this.#D+=">",this.#G(e),this.#D+="</"+i+">",e.attributes&&this.#J(e))}}#Z(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg",e);return f.#H.getValidAttributesNames(e).forEach(e=>{t.hasAttributeNS(null,e)&&(r.setAttributeNS(null,e,t.getAttributeNS(null,e)),t.removeAttributeNS(null,e))}),r}#X(t,e){const r=document.createElement(e);return f.#H.getValidAttributesNames(e).forEach(e=>{if(t.hasAttribute(e))if("href"===e||"src"===e){const i=this.sanitizeToUrl(t.getAttribute(e),e).url;""!==i&&r.setAttribute(e,i)}else r.setAttribute(e,t.getAttribute(e))}),t.hasAttribute("target")&&r.setAttribute("rel","noopener noreferrer"),r}#Y(t,e){const r=t.childNodes;for(let i=0;i<r.length;i++){const r=t.childNodes[i],a=f.#H.getValidNodeName(r.nodeName);if("#text"===a)e.appendChild(document.createTextNode(r.nodeValue));else if(""!==a){const t="svg"===a||"text"===a||"polyline"===a?this.#Z(r,a):this.#X(r,a);e.appendChild(t),this.#Y(r,t)}}}constructor(){Object.freeze(this)}sanitizeToHtmlElement(t,e){const r=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html"),i=new DocumentFragment;r&&"#document"===r.nodeName?(this.#Y(r.body.firstChild,i),e.appendChild(i)):e.textContent=""}clone(t){const e=document.createElement(t.tagName);return this.#Y(t,e),e}sanitizeToHtmlString(t){this.#D="",this.#F="";const e=(new DOMParser).parseFromString("<div>"+t.replace("&nbsp;","਀")+"</div>","text/html");return e&&"#document"===e.nodeName?(this.#G(e.body.firstChild),new c(this.#D,this.#F)):new c("","Parsing error")}sanitizeToUrl(t,e){const r=e||"href",i=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!i||"#document"!==i.nodeName)return new g("","Parsing error");const a=i.body.firstChild;let n="";for(let t=0;t<a.childNodes.length;t++){if("#text"!==a.childNodes[t].nodeName)return new g("","Invalid characters found in the url");n+=a.childNodes[t].nodeValue}if(n=n.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),n!==t)return new g("","Invalid characters found in the url");const s=["https:"];if("http:"!==window.location.protocol&&"href"!==r||s.push("http:"),"href"===r){s.push("mailto:"),s.push("sms:"),s.push("tel:");const t=n.match(/^\u0023\w*/);if(t&&n===t[0])return new g(n,"")}"src"===r&&s.push("data:");let o=null;try{o=new URL(n)}catch{return new g("","Invalid url string")}if(-1===s.indexOf(o.protocol))return new g("","Invalid protocol "+o.protocol);if(-1!==["sms:","tel:"].indexOf(o.protocol))return o.pathname.match(/^\+[0-9,*,\u0023]*$/)?new g(n,""):new g("","Invalid sms: or tel: url");try{encodeURIComponent(o.href)}catch{return new g("","Invalid character in url")}return new g(n,"")}sanitizeToJsString(t){const e=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!e||"#document"!==e.nodeName)return"";const r=e.body.firstChild;let i="";for(let t=0;t<r.childNodes.length;t++){if("#text"!==r.childNodes[t].nodeName)return"";i+=r.childNodes[t].nodeValue}return i=i.replaceAll(/</g,"≺").replaceAll(/>/g,"≻").replaceAll(/"/g,"″").replaceAll(/\u0027/g,"′"),i}sanitizeToColor(t){const e=t.match(/^\u0023[0-9,A-F,a-f]{6}$/);return e?e[0]:null}}const p=new f;class m extends h{static#O=new o("Maneuver",["iconName","instruction","distance","duration","itineraryPointObjId","objId"]);#$="";#tt="";#et=-1;#L=t.defaultValue;#rt=t.defaultValue;#u=-1;constructor(){super(),this.#u=n.nextObjId}get iconName(){return this.#$}set iconName(t){this.#$="string"==typeof t?p.sanitizeToJsString(t):""}get instruction(){return this.#tt}set instruction(t){this.#tt="string"==typeof t?p.sanitizeToJsString(t):""}get itineraryPointObjId(){return this.#et}set itineraryPointObjId(t){this.#et="number"==typeof t?t:-1}get distance(){return this.#L}set distance(e){this.#L="number"==typeof e?e:t.defaultValue}get duration(){return this.#rt}set duration(e){this.#rt="number"==typeof e?e:t.defaultValue}get objType(){return m.#O}get objId(){return this.#u}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(t.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this.#u,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.iconName=e.iconName,this.instruction=e.instruction,this.distance=e.distance,this.duration=e.duration,this.itineraryPointObjId=e.itineraryPointObjId,this.#u=n.nextObjId}}class v{#it;#at;#nt(t,e){}constructor(){Object.freeze(this),this.#it="fr"}getPromiseRoute(t){return this.#at=t,new Promise((t,e)=>this.#nt(t,e))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get userLanguage(){return this.#it}set userLanguage(t){this.#it=t}}const y=["ar","da","de","en","eo","es","es-ES","fi","fr","he","hu","id","it","ja","ko","my","nl","no","pl","pt-BR","pt-PT","ro","ru","sl","sv","tr","uk","vi","yo","zh-Hans"],b="v5",N={supportedCodes:[],instructions:{},grammars:{},abbreviations:{}},A=N.instructions,j=N.grammars,T=N.abbreviations;const w=new class{#st(t,e){if(e||0===e){if(0>e&&360<e)throw new Error("Degree "+e+" invalid");return 20>=e?A[t][b].constants.direction.north:70>e?A[t][b].constants.direction.northeast:110>=e?A[t][b].constants.direction.east:160>e?A[t][b].constants.direction.southeast:200>=e?A[t][b].constants.direction.south:250>e?A[t][b].constants.direction.southwest:290>=e?A[t][b].constants.direction.west:340>e?A[t][b].constants.direction.northwest:A[t][b].constants.direction.north}return""}async#ot(t,e){const r=await fetch("TravelNotesProviders/languages/"+t+"/"+e+".json");if(200===r.status&&r.ok){const i=await r.json();N[t][e]=i}}constructor(){this.abbreviations=T,Object.freeze(this)}loadLanguage(t){const e=-1===y.indexOf(t)?"en":t;return["instructions","grammars","abbreviations"].forEach(t=>this.#ot(t,e)),e}capitalizeFirstLetter(t,e){return e.charAt(0).toLocaleUpperCase(t)+e.slice(1)}ordinalize(t,e){return A[t][b].constants.ordinalize[e.toString()]||""}directionFromDegree(t,e){return this.#st(t,e)}laneConfig(t){if(!t.intersections||!t.intersections[0].lanes)throw new Error("No lanes object");const e=[];let r=null;return t.intersections[0].lanes.forEach(function(t){null!==r&&r===t.valid||(t.valid?e.push("o"):e.push("x"),r=t.valid)}),e.join("")}getWayName(t,e,r){const i=r&&r.classes||[];if("object"!=typeof e)throw new Error("step must be an Object");if(!Array.isArray(i))throw new Error("classes must be an Array or undefined");let a="",n=e.name||"";const s=(e.ref||"").split(";")[0];n===e.ref&&(n=""),n=n.replace(" ("+e.ref+")","");const o=-1!==i.indexOf("motorway");if(n&&s&&n!==s&&!o){const e=A[t][b].phrase["name and ref"]||A.en[b].phrase["name and ref"];a=this.tokenize(t,e,{name:n,ref:s},r)}else a=n&&s&&o&&/\d/.test(s)||!n&&s?r&&r.formatToken?r.formatToken("ref",s):s:r&&r.formatToken?r.formatToken("name",n):n;return a}compile(t,e,r){if(!e.maneuver)throw new Error("No step maneuver provided");const i=r||{};let a=e.maneuver.type;const n=e.maneuver.modifier,s=e.mode,o=e.driving_side;if(!a)throw new Error("Missing step maneuver type");if("depart"!==a&&"arrive"!==a&&!n)throw new Error("Missing step maneuver modifier");A[t][b][a]||(console.log("Encountered unknown instruction type: "+a),a="turn");let l=null;if(A[t][b].modes[s])l=A[t][b].modes[s];else{const e="off ramp"===a&&0<=n.indexOf(o);l=A[t][b][a][n]&&!e?A[t][b][a][n]:A[t][b][a].default}let h=null;switch(a){case"use lane":h=A[t][b].constants.lanes[this.laneConfig(e)],h||(l=A[t][b]["use lane"].no_lanes);break;case"rotary":case"roundabout":l=e.rotary_name&&e.maneuver.exit&&l.name_exit?l.name_exit:e.rotary_name&&l.name?l.name:e.maneuver.exit&&l.exit?l.exit:l.default}const u=this.getWayName(t,e,i);let d=l.default;e.destinations&&e.exits&&l.exit_destination?d=l.exit_destination:e.destinations&&l.destination?d=l.destination:e.exits&&l.exit?d=l.exit:u&&l.name?d=l.name:i.waypointName&&l.named&&(d=l.named);const c=e.destinations&&e.destinations.split(": "),g=c&&c[0].split(",")[0],f=c&&c[1]&&c[1].split(",")[0];let p="";p=f&&g?g+": "+f:g||f||"";const m=0<=i.legIndex&&i.legIndex!==i.legCount-1?this.ordinalize(t,i.legIndex+1):"",v={way_name:u,destination:p,exit:(e.exits||"").split(";")[0],exit_number:this.ordinalize(t,e.maneuver.exit||1),rotary_name:e.rotary_name,lane_instruction:h,modifier:A[t][b].constants.modifier[n],direction:this.directionFromDegree(t,e.maneuver.bearing_after),nth:m,waypoint_name:i.waypointName};return this.tokenize(t,d,v,i)}grammarize(t,e,r){if(r&&j&&j[t]&&j[t][b]){const i=j[t][b][r];if(i){let r=" "+e+" ";const a=j[t].meta.regExpFlags||"";return i.forEach(function(t){const e=new RegExp(t[0],a);r=r.replace(e,t[1])}),r.trim()}}return e}tokenize(t,e,r,i){const a=this;let n=!1;const s=e.replace(/\{(\w+)(?::(\w+))?\}/g,function(e,s,o,l){let h=r[s];return void 0===h?e:(h=a.grammarize(t,h,o),0===l&&A[t].meta.capitalizeFirstLetter&&(n=!0,h=a.capitalizeFirstLetter(t,h)),i&&i.formatToken&&(h=i.formatToken(s,h)),h)}).replace(/ {2}/g," ");return!n&&A[t].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(t,s):s}},k=Object.freeze({turn:Object.freeze({default:"undefined","sharp left":"turn-sharp-left",left:"turn-left","slight left":"turn-slight-left",straight:"turn-straight","slight right":"turn-slight-right",right:"turn-right","sharp right":"turn-sharp-right",uturn:"turn-u-turn"}),"new name":Object.freeze({default:"undefined","sharp left":"new-name-sharp-left",left:"new-name-left","slight left":"new-name-slight-left",straight:"new-name-straight","slight right":"new-name-slight-right",right:"new-name-right","sharp right":"new-name-sharp-right"}),depart:Object.freeze({default:"depart-default","sharp left":"depart-left",left:"depart-left","slight left":"depart-left",straight:"depart-default","slight right":"depart-right",right:"depart-right","sharp right":"depart-right"}),arrive:Object.freeze({default:"arrive-default","sharp left":"arrive-left",left:"arrive-left","slight left":"arrive-left",straight:"arrive-default","slight right":"arrive-right",right:"arrive-right","sharp right":"arrive-right"}),merge:Object.freeze({default:"merge-default","sharp left":"merge-left",left:"merge-left","slight left":"merge-left",straight:"merge-default","slight right":"merge-right",right:"merge-right","sharp right":"merge-right"}),"on ramp":Object.freeze({default:"undefined","sharp left":"on-ramp-left",left:"on-ramp-left","slight left":"on-ramp-left","slight right":"on-ramp-right",right:"on-ramp-right","sharp right":"on-ramp-right"}),"off ramp":Object.freeze({default:"undefined","sharp left":"off-ramp-left",left:"off-ramp-left","slight left":"off-ramp-left","slight right":"off-ramp-right",right:"off-ramp-right","sharp right":"off-ramp-right"}),fork:Object.freeze({default:"undefined","sharp left":"fork-left",left:"fork-left","slight left":"fork-left","slight right":"fork-right",right:"fork-right","sharp right":"fork-right"}),"end of road":Object.freeze({default:"undefined","sharp left":"end-of-road-left",left:"end-of-road-left","slight left":"end-of-road-left","slight right":"end-of-road-right",right:"end-of-road-right","sharp right":"end-of-road-right"}),continue:Object.freeze({default:"undefined","sharp left":"continue-sharp-left",left:"continue-left","slight left":"continue-slight-left",straight:"continue-straight","slight right":"continue-slight-right",right:"continue-right","sharp right":"continue-sharp-right"}),roundabout:Object.freeze({default:"undefined","sharp left":"roundabout-left",left:"roundabout-left","slight left":"roundabout-left","slight right":"roundabout-right",right:"roundabout-right","sharp right":"roundabout-right"}),"exit roundabout":Object.freeze({default:"undefined",left:"roundabout-exit","sharp left":"roundabout-exit","slight left":"roundabout-exit",right:"roundabout-exit","sharp right":"roundabout-exit","slight right":"roundabout-exit",straight:"roundabout-exit"}),rotary:Object.freeze({default:"undefined","sharp left":"rotary-left",left:"rotary-left","slight left":"rotary-left","slight right":"rotary-right",right:"rotary-right","sharp right":"rotary-right"}),"roundabout turn":Object.freeze({default:"undefined","sharp left":"roundabout-turn-sharp-left",left:"roundabout-turn-left","slight left":"roundabout-turn-slight-left",straight:"roundabout-turn-straight","slight right":"roundabout-turn-slight-right",right:"roundabout-turn-right","sharp right":"roundabout-turn-sharp-right"}),notification:Object.freeze({default:"undefined"}),default:Object.freeze({default:"undefined"})});class R extends v{#at;static get#lt(){return 6}#ht(t,e,r){if("Ok"!==t.code)return void r(new Error("Response code not ok"));if(0===t.routes.length)return void r(new Error("Route not found"));this.#at.itinerary.itineraryPoints.removeAll(),this.#at.itinerary.maneuvers.removeAll(),this.#at.itinerary.hasProfile=!1,this.#at.itinerary.ascent=0,this.#at.itinerary.descent=0;const i=new a;t.routes[0].geometry=i.decode(t.routes[0].geometry,[R.#lt,R.#lt]),t.routes[0].legs.forEach(t=>{let e=0;t.steps.forEach(r=>{r.geometry=i.decode(r.geometry,[R.#lt,R.#lt]);const a=new m;a.iconName=k[r.maneuver.type]?k[r.maneuver.type][r.maneuver.modifier]||k[r.maneuver.type].default:k.default.default,a.instruction=w.compile(this.userLanguage,r),a.duration=r.duration;let n=0;for(let i=0;1===r.geometry.length?1>i:i<r.geometry.length;i++){const s=new u;s.latLng=[r.geometry[i][0],r.geometry[i][1]],s.distance=t.annotation.distance[e]?t.annotation.distance[e]:0,this.#at.itinerary.itineraryPoints.add(s),i!==r.geometry.length-1&&(n+=s.distance,e++),0===i&&(a.itineraryPointObjId=s.objId)}a.distance=n,this.#at.itinerary.maneuvers.add(a)})});const n=this.#at.wayPoints.iterator;t.waypoints.forEach(t=>{n.done||(n.value.latLng=[t.location[1],t.location[0]])}),e(this.#at)}#ut(){let t=null;this.#at.wayPoints.forEach(e=>{t=t?t+";":"",t+=e.lng.toFixed(r.fixed)+","+e.lat.toFixed(r.fixed)});let e="";switch(this.#at.itinerary.transitMode){case"car":e="routed-car";break;case"bike":e="routed-bike";break;case"pedestrian":e="routed-foot";break;default:return}return"https://routing.openstreetmap.de/"+e+"/route/v1/driving/"+t+"?geometries=polyline6&overview=full&steps=true&annotations=distance"}#nt(t,e){fetch(this.#ut()).then(r=>{200===r.status&&r.ok?r.json().then(r=>this.#ht(r,t,e)):e(new Error("Invalid status "+r.status))})}constructor(){super()}getPromiseRoute(t){return this.#at=t,new Promise((t,e)=>this.#nt(t,e))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4QkaDwEMOImNWgAABTZJREFUSMftl21sFEUYx3+zu3ft9a7Q0tIXoKUCIkIVeYsECmgbBKIIEVC0QEs0UIEghA+CEkkIaCyJBhFBBC00qHxoQClvhgLyEonyckhbFKS90iK0FAqFHr273R0/XNlCymEREr44X3by7DPzm5n9z8x/hZRS8giKwiMqjwys3U/y/pIqdh0tp8RTS229F0yIaxtBz+R2jOjfhSFPJbW6L9Gab/zFdjfv5x/k2g0f4TYVISUCEJKmp8QfMGjjsLNoShozxvR7MHD1VS+D53+Pp/oqmqJYoEBAxzQlQoKmCMJUJTgAwDQkye0j2f1JJvHRzvsH/3m+jqfn5IOUICWGYZIY5WTScz1J751EYjsXArh45QZ73BV8W1RC7VUvNkVBEBzUoZXZPJEc03rwhboGkqettWYopeSb2SPIHPbkPZfvu6JSZizfidIExpQU5+eQ0M7VOnDS9LVcvNKAkBDtDOf35ZOIj3K2SjSXrnoZNDOPuvqbCCA+yklxfs6/g3O3HOXd/ANoikCakvPrphEfFWG9P1R6ni+3n6Ck4hJI6JUcS/YLqaQ/09nKuVx/kx6TVoGUmIZkYVYac18beG+wfeLnGIaBqZtseGckk59rXt7xH/5IwaHTRNjVO1Tt8wcY1b8rWxaPs3J/OHiarKVbsKkqqoCLW+eFPkB2uD0EfAEAOsa67oC+tHgzW387iyNMQ0qJ1xfA6wsgpSTcprHX7eHFBZus/DFp3XksMRoAX0Bn169nQ4N3HT+H0FQApqb3suLbj5Sx7UgZihA0Bgxmje5HeV4Ong05zB7bn8aAjhCCfSfOUfjLGatd5vBUkGDXVPYeKQ8NdldcCu7FgMHIPilWfMU2N2E2FVNK3pvwLLlvDqNzXBuS2rdh6dShfJCZhikldpvKmkK31e75vin4AjoAxWU1ocHV17zBimnS4bYtcKysGgC/T2feK/1bKHTu+AF4G4OfyH2m2oonxrgwTGmpPSRYms11VRFWPaA3vZCSMFvL4z3MpnFLorrZ3IkixG19y9DgmMjwWy34+0qDFe/RqR0AtjAbeUXFLcAbfjpJRHhwQI835QJU1zVYE4hqEx4anJocAwKEprK3uNKKZ6X3wjAlqiKYvXoP63c3wzfuKWHGil2oioJhSt7IaBbl/hPnsNuCYu2ZEhd6Hxcc/ovxuYUoqqB7QhSnVmRZid1z1lFZcx0BGLqB36+DBIddw6YKhITEaCen8qZbbQbmfE1ZVR2GYbBuwcuMHdrj7jMeN7CbVf+j8jI7jnmaBfbpZDrEuDClRFMVnA47LocdTVUwTUlctJPDK7Ot/KKj5ZSW1yIBw5R3QO/qQOaN7QcSNJvKq8sKaWhSq8th5+xXb7F40mA6xUbScNPPDa+fjjGRLMwczOm86bR1hgFw06eT/dFWwuzBZZ45bkDrLglX5kp8fh0hITk2kpOfTcFhb51ZafTrDJqZx7mL1xAED4+qzXMQrfFcB5ZMQPcbAFTWXichazU/3ya2UOVQcRXdMldRUX0teFT6DQo/ntgCek8jsPO4h1GLCrDbNZASv1+nX9d4sjJSyeidREJ00AhcqGtgn7uCjUUlHDt9AYdNQyDx+XQKlkxgxIAu9299jpbVMGT+JgzDsG4j2TQIacqgFhRBuKagCmHlaIpgZ+7r9O2e8N/NXsAwmbVmD2u2ubFpKpoiWpo9JNIIGr63R/dhWU4Gmqo8uMsE8OsG64tK2X3cQ7Gnhsv1jShS0L5tOL2SY8jok8Lk4anYm263h2Jv//+FeRjlHxKxS4in4X1YAAAAAElFTkSuQmCC"}get name(){return"OSRM"}get title(){return"OSRM"}get transitModes(){return["bike","pedestrian","car"]}get providerKeyNeeded(){return!1}get userLanguage(){return super.userLanguage}set userLanguage(t){super.userLanguage=w.loadLanguage(t)}}window.TaN.addProvider(R)}();
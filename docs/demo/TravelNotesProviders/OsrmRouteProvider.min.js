/**
 * 
 * @source: https://github.com/wwwouaiebe/TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * travelnotes - version 4.1.0
 * Build 00207 - 2022-10-14T14:54:36+0200 
 * Copyright 2017 2022 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
 */


!function(){"use strict";class e{static get fixed(){return 2}static get invalid(){return-1}static get defaultValue(){return 0}static get metersInKm(){return 1e3}}class t{static get fixed(){return 2}static get defaultValue(){return 0}}class r{static get defaultValue(){return 0}static get fixed(){return 6}static get maxLat(){return 90}static get minLat(){return-90}static get maxLng(){return 180}static get minLng(){return-180}}class i{static get notEdited(){return 0}static get editedNoChange(){return 1}static get editedChanged(){return 2}}class a{static get#e(){return.5}static get#t(){return 5}static get#r(){return 10}static get#i(){return 31}static get#a(){return 32}static get#n(){return 63}#s(e){return Math.floor(Math.abs(e)+a.#e)*(0<=e?1:-1)}#o(e,t,r){const i=this.#s(e*r),n=this.#s(t*r);let s=i-n;s<<=1,0>i-n&&(s=~s);let o="";for(;a.#a<=s;)o+=String.fromCharCode((a.#a|s&a.#i)+a.#n),s>>=a.#t;return o+=String.fromCharCode(s+a.#n),o}#l;#d(e){let t=null,r=0,i=0;do{t=e.charCodeAt(this.#l++)-a.#n,i|=(t&a.#i)<<r,r+=a.#t}while(a.#a<=t);return 1&i?~(i>>1):i>>1}constructor(){Object.freeze(this)}encode(e,t){if(!e.length)return"";const r=t.length,i=Array.from(t,(e=>Math.pow(a.#r,e)));let n="";for(let t=0;t<r;t++)n+=this.#o(e[0][t],0,i[t]);for(let t=1;t<e.length;t++){const a=e[t],s=e[t-1];for(let e=0;e<r;e++)n+=this.#o(a[e],s[e],i[e])}return n}decode(e,t){const r=t.length;if(!e||0===e.length)return[];this.#l=0;const i=[],n=Array.from(t,(e=>Math.pow(a.#r,e))),s=new Array(r).fill(0);for(;this.#l<e.length;){const t=new Array(r).fill(0);for(let i=0;i<r;i++)s[i]+=this.#d(e),t[i]=s[i]/n[i];i.push(t)}return i}}class n{static#h=0;static get nextObjId(){return++n.#h}}const s="2.4.0";class o{#u="";#c=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];#g=[];constructor(e,t){if(Object.freeze(this),-1===this.#c.indexOf(e))throw new Error("Invalid ObjType name : "+e);this.#u=e,this.#g=t,Object.freeze(this.#g)}get name(){return this.#u}get version(){return s}get properties(){return this.#g}get jsonObject(){return{name:this.#u,version:s}}validate(e){if(!Object.getOwnPropertyNames(e).includes("name"))throw new Error("No name for "+this.#u);if(this.#u!==e.name)throw new Error("Invalid name for "+this.#u);if(!Object.getOwnPropertyNames(e).includes("version"))throw new Error("No version for "+this.#u)}}class l{#f;#p(){this.#f.routes.forEach((e=>{e.dashArray=0,e.hidden=!1}))}#m(){this.#f.routes.forEach((e=>{e.edited=i.notEdited}))}#y(){this.#m(),this.#f.editedRoute={name:"",wayPoints:[{name:"",lat:0,lng:0,objId:2,objType:{name:"WayPoint",version:"1.4.0"}},{name:"",lat:0,lng:0,objId:3,objType:{name:"WayPoint",version:"1.4.0"}}],notes:[],itinerary:{itineraryPoints:[],maneuvers:[],provider:"",transitMode:"",objId:1,objType:{name:"Itinerary",version:"1.4.0"}},width:3,color:"#ff0000",dashArray:0,chain:!0,distance:0,duration:0,edited:i.notEdited,hidden:!1,chainedDistance:0,objId:4,objType:{name:"Route",version:"1.4.0"}}}#b(){if(this.#f.userData.layerId){const e=[{layerId:"0",layerName:"OSM - Color"},{layerId:"1",layerName:"OSM - Black and White"},{layerId:"2",layerName:"Thunderforest - Transport"},{layerId:"3",layerName:"Thunderforest - OpenCycleMap"},{layerId:"4",layerName:"Thunderforest - Outdoors"},{layerId:"5",layerName:"Esri - Aerial view"},{layerId:"6",layerName:"Kartverket - Norway"},{layerId:"7",layerName:"IGN-NGI - Belgium now"},{layerId:"12",layerName:"Thunderforest - Landscape"},{layerId:"24",layerName:"LantmÃ¤teriet - Sweden"},{layerId:"25",layerName:"Maanmittauslaitos - Finland"}].find((e=>e.layerId===this.#f.userData.layerId));this.#f.layerName=e?e.layerName:"OSM - Color"}else this.#f.layerName="OSM - Color"}#v(e){e.forEach((e=>{e.elev=t.defaultValue}))}#A(){this.#f.routes.forEach((e=>{e.itinerary.hasProfile=!1,e.itinerary.ascent=0,e.itinerary.descent=0,this.#v(e.itinerary.itineraryPoints)})),this.#f.editedRoute.itinerary.hasProfile=!1,this.#f.editedRoute.itinerary.ascent=0,this.#f.editedRoute.itinerary.descent=0,this.#v(this.#f.editedRoute.itinerary.itineraryPoints)}#j(t){t.itinerary.maneuvers.forEach((t=>{"kArriveDefault"===t.iconName&&(t.distance=e.defaultValue)}))}#N(e){e.wayPoints.forEach((e=>{e.address=e.name,e.name=""}))}#k(){this.#f.routes.forEach((e=>{e.editionStatus=e.edited,this.#j(e),this.#N(e)})),this.#f.editedRoute.editionStatus=this.#f.editedRoute.edited,this.#j(this.#f.editedRoute),this.#N(this.#f.editedRoute)}#R(){this.#f.routes.forEach((e=>{e.dashIndex=e.dashArray})),this.#f.editedRoute.dashIndex=this.#f.editedRoute.dashArray}#T(e){return e.replaceAll(/style='color:white;background-color:red'/g,"class='TravelNotes-Note-WhiteRed'").replaceAll(/style='color:white;background-color:green'/g,"class='TravelNotes-Note-WhiteGreen'").replaceAll(/style='color:white;background-color:blue'/g,"class='TravelNotes-Note-WhiteBlue'").replaceAll(/style='color:white;background-color:brown'/g,"class='TravelNotes-Note-WhiteBrown'").replaceAll(/style='color:white;background-color:black'/g,"class='TravelNotes-Note-WhiteBlack'").replaceAll(/style='border:solid 0.1em'/g,"class='TravelNotes-Note-BlackWhite'").replaceAll(/style='background-color:white;'/g,"class='TravelNotes-Note-Knooppunt'").replaceAll(/style='fill:green;font:bold 120px sans-serif;'/g,"").replaceAll(/style='fill:none;stroke:green;stroke-width:10;'/g,"")}#w(e){"string"==typeof e.iconHeight&&(e.iconHeight=Number.parseInt(e.iconHeight)),"string"==typeof e.iconWidth&&(e.iconWidth=Number.parseInt(e.iconWidth)),e.iconContent=this.#T(e.iconContent),e.popupContent=this.#T(e.popupContent),e.tooltipContent=this.#T(e.tooltipContent),e.phone=this.#T(e.phone),e.address=this.#T(e.address)}#O(){this.#f.notes.forEach((e=>{this.#w(e)})),this.jsonTravel.routes.forEach((e=>{e.notes.forEach((e=>{this.#w(e)}))}))}#E(){switch(this.#f.objType.version){case"1.0.0":this.#p();case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":this.#y();case"1.5.0":this.#b();case"1.6.0":this.#A();case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":this.#k();case"1.12.0":case"1.13.0":this.#O();case"2.0.0":case"2.1.0":case"2.2.0":case"2.3.0":this.#R(),this.#f.objType.version="2.4.0";break;default:throw new Error("invalid version for travel")}}constructor(){Object.freeze(this)}update(e){e.objType.version!==s&&(this.#f=e,this.#E())}}class d{constructor(){Object.freeze(this)}validateObject(e){if(!Object.getOwnPropertyNames(e).includes("objType"))throw new Error("No objType for "+this.objType.name);this.objType.validate(e.objType),"Travel"===this.objType.name&&this.objType.version!==e.objType.version&&(new l).update(e);const t=Object.getOwnPropertyNames(e);return this.objType.properties.forEach((e=>{if(!t.includes(e))throw new Error("No "+e+" for "+this.objType.name)})),e}}class h extends d{static#M=new o("ItineraryPoint",["lat","lng","distance","elev","objId"]);#S=r.defaultValue;#I=r.defaultValue;#_=e.defaultValue;#L=t.defaultValue;#h=-1;constructor(){super(),this.#h=n.nextObjId}get lat(){return this.#S}set lat(e){this.#S="number"==typeof e?e:r.defaultValue}get lng(){return this.#I}set lng(e){this.#I="number"==typeof e?e:r.defaultValue}get distance(){return this.#_}set distance(t){this.#_="number"==typeof t?t:e.defaultValue}get elev(){return this.#L}set elev(e){this.#L="number"==typeof e?e:r.defaultValue}get latLng(){return[this.lat,this.lng]}set latLng(e){"number"==typeof e[0]&&"number"==typeof e[1]?(this.#S=e[0],this.#I=e[1]):(this.#S=r.defaultValue,this.#I=r.defaultValue)}get objType(){return h.#M}get objId(){return this.#h}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(r.fixed)),lng:parseFloat(this.lng.toFixed(r.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),elev:parseFloat(this.elev.toFixed(t.fixed)),objId:this.#h,objType:this.objType.jsonObject}}set jsonObject(e){const t=this.validateObject(e);this.lat=t.lat,this.lng=t.lng,this.distance=t.distance,this.elev=t.elev,this.#h=n.nextObjId}}class u{#x=new Map;constructor(){Object.freeze(this),this.#x.set("a",["href","target"]),this.#x.set("div",[]),this.#x.set("del",[]),this.#x.set("em",[]),this.#x.set("figcaption",[]),this.#x.set("figure",[]),this.#x.set("h1",[]),this.#x.set("h2",[]),this.#x.set("h3",[]),this.#x.set("h4",[]),this.#x.set("h5",[]),this.#x.set("h6",[]),this.#x.set("hr",[]),this.#x.set("img",["src","alt","width","height"]),this.#x.set("ins",[]),this.#x.set("li",[]),this.#x.set("mark",[]),this.#x.set("ol",[]),this.#x.set("p",[]),this.#x.set("s",[]),this.#x.set("small",[]),this.#x.set("strong",[]),this.#x.set("span",[]),this.#x.set("sub",[]),this.#x.set("sup",[]),this.#x.set("ul",[]),this.#x.set("svg",["xmlns","viewBox","class"]),this.#x.set("text",["x","y","text-anchor"]),this.#x.set("polyline",["points","class","transform"]),this.#x.set("#text",[])}getValidAttributesNames(e){return this.#x.get(e).concat(["id","class","dir","title"])}getValidNodeName(e){const t=e.toLowerCase();return this.#x.get(t)?t:""}}class c{#V;#U;constructor(e,t){Object.freeze(this),this.#V=e,this.#U=t}get htmlString(){return this.#V}get errorsString(){return this.#U}}class g{#C;#U;constructor(e,t){Object.freeze(this),this.#C=e,this.#U=t}get url(){return this.#C}get errorsString(){return this.#U}}class f{#z="";#D="";static#P=new u;#F(e){return e.replaceAll(/\u003c/g,"&lt;").replaceAll(/\u003e/g,"&gt;").replaceAll(/\u0022/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}#B(e,t){const r=this.sanitizeToUrl(e,t).url;""===r&&""!==e?this.#D+="\nAn invalid url ("+e+") was removed from a "+t+" attribute":this.#z+=" "+t+'="'+r+'"'}#H(e,t){f.#P.getValidAttributesNames(t).forEach((t=>{e.hasAttributeNS(null,t)&&(this.#z+=" "+t+'="'+this.#F(e.getAttributeNS(null,t))+'"',e.removeAttributeNS(null,t))}))}#K(e,t){e.hasAttribute("target")&&(this.#z+=' rel="noopener noreferrer"'),f.#P.getValidAttributesNames(t).forEach((t=>{e.hasAttribute(t)&&("href"===t||"src"===t?this.#B(e.getAttribute(t),t):this.#z+=" "+t+'="'+this.#F(e.getAttribute(t))+'"',e.removeAttribute(t))}))}#W(e){for(let t=0;t<e.attributes.length;t++)"rel"!==e.attributes[t].name&&(this.#D+="\nAn unsecure attribute "+e.attributes[t].name+'="'+e.attributes[t].value+'" was removed.')}#Q(e){const t=e.childNodes;for(let r=0;r<t.length;r++){const t=e.childNodes[r],i=f.#P.getValidNodeName(t.nodeName);""===i?this.#D+="\nAn invalid tag "+t.nodeName+" was removed":"#text"===i?this.#z+=this.#F(t.nodeValue):(this.#z+="<"+i,"svg"===i||"text"===i||"polyline"===i?this.#H(t,i):this.#K(t,i),this.#z+=">",this.#Q(t),this.#z+="</"+i+">",t.attributes&&this.#W(t))}}#q(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg",t);return f.#P.getValidAttributesNames(t).forEach((t=>{e.hasAttributeNS(null,t)&&(r.setAttributeNS(null,t,e.getAttributeNS(null,t)),e.removeAttributeNS(null,t))})),r}#J(e,t){const r=document.createElement(t);return f.#P.getValidAttributesNames(t).forEach((t=>{if(e.hasAttribute(t))if("href"===t||"src"===t){const i=this.sanitizeToUrl(e.getAttribute(t),t).url;""!==i&&r.setAttribute(t,i)}else r.setAttribute(t,e.getAttribute(t))})),e.hasAttribute("target")&&r.setAttribute("rel","noopener noreferrer"),r}#G(e,t){const r=e.childNodes;for(let i=0;i<r.length;i++){const r=e.childNodes[i],a=f.#P.getValidNodeName(r.nodeName);if("#text"===a)t.appendChild(document.createTextNode(r.nodeValue));else if(""!==a){const e="svg"===a||"text"===a||"polyline"===a?this.#q(r,a):this.#J(r,a);t.appendChild(e),this.#G(r,e)}}}constructor(){Object.freeze(this)}sanitizeToHtmlElement(e,t){const r=(new DOMParser).parseFromString("<div>"+e+"</div>","text/html"),i=new DocumentFragment;r&&"#document"===r.nodeName?(this.#G(r.body.firstChild,i),t.appendChild(i)):t.textContent=""}clone(e){const t=document.createElement(e.tagName);return this.#G(e,t),t}sanitizeToHtmlString(e){this.#z="",this.#D="";const t=(new DOMParser).parseFromString("<div>"+e.replace("&nbsp;","à¨")+"</div>","text/html");return t&&"#document"===t.nodeName?(this.#Q(t.body.firstChild),new c(this.#z,this.#D)):new c("","Parsing error")}sanitizeToUrl(e,t){const r=t||"href",i=(new DOMParser).parseFromString("<div>"+e+"</div>","text/html");if(!i||"#document"!==i.nodeName)return new g("","Parsing error");const a=i.body.firstChild;let n="";for(let e=0;e<a.childNodes.length;e++){if("#text"!==a.childNodes[e].nodeName)return new g("","Invalid characters found in the url");n+=a.childNodes[e].nodeValue}if(n=n.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),n!==e)return new g("","Invalid characters found in the url");const s=["https:"];if("http:"!==window.location.protocol&&"href"!==r||s.push("http:"),"href"===r){s.push("mailto:"),s.push("sms:"),s.push("tel:");const e=n.match(/^\u0023\w*/);if(e&&n===e[0])return new g(n,"")}"src"===r&&s.push("data:");let o=null;try{o=new URL(n)}catch(e){return new g("","Invalid url string")}if(-1===s.indexOf(o.protocol))return new g("","Invalid protocol "+o.protocol);if(-1!==["sms:","tel:"].indexOf(o.protocol))return o.pathname.match(/^\+[0-9,*,\u0023]*$/)?new g(n,""):new g("","Invalid sms: or tel: url");try{encodeURIComponent(o.href)}catch(e){return new g("","Invalid character in url")}return new g(n,"")}sanitizeToJsString(e){const t=(new DOMParser).parseFromString("<div>"+e+"</div>","text/html");if(!t||"#document"!==t.nodeName)return"";const r=t.body.firstChild;let i="";for(let e=0;e<r.childNodes.length;e++){if("#text"!==r.childNodes[e].nodeName)return"";i+=r.childNodes[e].nodeValue}return i=i.replaceAll(/</g,"âº").replaceAll(/>/g,"â»").replaceAll(/"/g,"â³").replaceAll(/\u0027/g,"â²"),i}sanitizeToColor(e){const t=e.match(/^\u0023[0-9,A-F,a-f]{6}$/);return t?t[0]:null}}const p=new f;class m extends d{static#M=new o("Maneuver",["iconName","instruction","distance","duration","itineraryPointObjId","objId"]);#Z="";#X="";#Y=-1;#_=e.defaultValue;#$=e.defaultValue;#h=-1;constructor(){super(),this.#h=n.nextObjId}get iconName(){return this.#Z}set iconName(e){this.#Z="string"==typeof e?p.sanitizeToJsString(e):""}get instruction(){return this.#X}set instruction(e){this.#X="string"==typeof e?p.sanitizeToJsString(e):""}get itineraryPointObjId(){return this.#Y}set itineraryPointObjId(e){this.#Y="number"==typeof e?e:-1}get distance(){return this.#_}set distance(t){this.#_="number"==typeof t?t:e.defaultValue}get duration(){return this.#$}set duration(t){this.#$="number"==typeof t?t:e.defaultValue}get objType(){return m.#M}get objId(){return this.#h}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this.#h,objType:this.objType.jsonObject}}set jsonObject(e){const t=this.validateObject(e);this.iconName=t.iconName,this.instruction=t.instruction,this.distance=t.distance,this.duration=t.duration,this.itineraryPointObjId=t.itineraryPointObjId,this.#h=n.nextObjId}}const y=["ar","da","de","en","eo","es","es-ES","fi","fr","he","hu","id","it","ja","ko","my","nl","no","pl","pt-BR","pt-PT","ro","ru","sl","sv","tr","uk","vi","yo","zh-Hans"],b={supportedCodes:[],instructions:{},grammars:{},abbreviations:{}},v=b.instructions,A=b.grammars,j=b.abbreviations;const N=new class{#ee(e,t){if(t||0===t){if(0>t&&360<t)throw new Error("Degree "+t+" invalid");return 20>=t?v[e].v5.constants.direction.north:70>t?v[e].v5.constants.direction.northeast:110>=t?v[e].v5.constants.direction.east:160>t?v[e].v5.constants.direction.southeast:200>=t?v[e].v5.constants.direction.south:250>t?v[e].v5.constants.direction.southwest:290>=t?v[e].v5.constants.direction.west:340>t?v[e].v5.constants.direction.northwest:v[e].v5.constants.direction.north}return""}async#te(e,t){const r=await fetch("TravelNotesProviders/languages/"+e+"/"+t+".json");if(200===r.status&&r.ok){const i=await r.json();b[e][t]=i}}constructor(){this.abbreviations=j,Object.freeze(this)}loadLanguage(e){const t=-1===y.indexOf(e)?"en":e;return["instructions","grammars","abbreviations"].forEach((e=>this.#te(e,t))),t}capitalizeFirstLetter(e,t){return t.charAt(0).toLocaleUpperCase(e)+t.slice(1)}ordinalize(e,t){return v[e].v5.constants.ordinalize[t.toString()]||""}directionFromDegree(e,t){return this.#ee(e,t)}laneConfig(e){if(!e.intersections||!e.intersections[0].lanes)throw new Error("No lanes object");const t=[];let r=null;return e.intersections[0].lanes.forEach((function(e){null!==r&&r===e.valid||(e.valid?t.push("o"):t.push("x"),r=e.valid)})),t.join("")}getWayName(e,t,r){const i=r&&r.classes||[];if("object"!=typeof t)throw new Error("step must be an Object");if(!Array.isArray(i))throw new Error("classes must be an Array or undefined");let a="",n=t.name||"";const s=(t.ref||"").split(";")[0];n===t.ref&&(n=""),n=n.replace(" ("+t.ref+")","");const o=-1!==i.indexOf("motorway");if(n&&s&&n!==s&&!o){const t=v[e].v5.phrase["name and ref"]||v.en.v5.phrase["name and ref"];a=this.tokenize(e,t,{name:n,ref:s},r)}else a=n&&s&&o&&/\d/.test(s)||!n&&s?r&&r.formatToken?r.formatToken("ref",s):s:r&&r.formatToken?r.formatToken("name",n):n;return a}compile(e,t,r){if(!t.maneuver)throw new Error("No step maneuver provided");const i=r||{};let a=t.maneuver.type;const n=t.maneuver.modifier,s=t.mode,o=t.driving_side;if(!a)throw new Error("Missing step maneuver type");if("depart"!==a&&"arrive"!==a&&!n)throw new Error("Missing step maneuver modifier");v[e].v5[a]||(console.log("Encountered unknown instruction type: "+a),a="turn");let l=null;if(v[e].v5.modes[s])l=v[e].v5.modes[s];else{const t="off ramp"===a&&0<=n.indexOf(o);l=v[e].v5[a][n]&&!t?v[e].v5[a][n]:v[e].v5[a].default}let d=null;switch(a){case"use lane":d=v[e].v5.constants.lanes[this.laneConfig(t)],d||(l=v[e].v5["use lane"].no_lanes);break;case"rotary":case"roundabout":l=t.rotary_name&&t.maneuver.exit&&l.name_exit?l.name_exit:t.rotary_name&&l.name?l.name:t.maneuver.exit&&l.exit?l.exit:l.default}const h=this.getWayName(e,t,i);let u=l.default;t.destinations&&t.exits&&l.exit_destination?u=l.exit_destination:t.destinations&&l.destination?u=l.destination:t.exits&&l.exit?u=l.exit:h&&l.name?u=l.name:i.waypointName&&l.named&&(u=l.named);const c=t.destinations&&t.destinations.split(": "),g=c&&c[0].split(",")[0],f=c&&c[1]&&c[1].split(",")[0];let p="";p=f&&g?g+": "+f:g||f||"";const m=0<=i.legIndex&&i.legIndex!==i.legCount-1?this.ordinalize(e,i.legIndex+1):"",y={way_name:h,destination:p,exit:(t.exits||"").split(";")[0],exit_number:this.ordinalize(e,t.maneuver.exit||1),rotary_name:t.rotary_name,lane_instruction:d,modifier:v[e].v5.constants.modifier[n],direction:this.directionFromDegree(e,t.maneuver.bearing_after),nth:m,waypoint_name:i.waypointName};return this.tokenize(e,u,y,i)}grammarize(e,t,r){if(r&&A&&A[e]&&A[e].v5){const i=A[e].v5[r];if(i){let r=" "+t+" ";const a=A[e].meta.regExpFlags||"";return i.forEach((function(e){const t=new RegExp(e[0],a);r=r.replace(t,e[1])})),r.trim()}}return t}tokenize(e,t,r,i){const a=this;let n=!1;const s=t.replace(/\{(\w+)(?::(\w+))?\}/g,(function(t,s,o,l){let d=r[s];return void 0===d?t:(d=a.grammarize(e,d,o),0===l&&v[e].meta.capitalizeFirstLetter&&(n=!0,d=a.capitalizeFirstLetter(e,d)),i&&i.formatToken&&(d=i.formatToken(s,d)),d)})).replace(/ {2}/g," ");return!n&&v[e].meta.capitalizeFirstLetter?this.capitalizeFirstLetter(e,s):s}},k=Object.freeze({turn:Object.freeze({default:"kUndefined","sharp left":"kTurnSharpLeft",left:"kTurnLeft","slight left":"kTurnSlightLeft",straight:"kTurnStraight","slight right":"kTurnSlightRight",right:"kTurnRight","sharp right":"kTurnSharpRight",uturn:"kTurnUturn"}),"new name":Object.freeze({default:"kUndefined","sharp left":"kNewNameSharpLeft",left:"kNewNameLeft","slight left":"kNewNameSlightLeft",straight:"kNewNameStraight","slight right":"kNewNameSlightRight",right:"kNewNameRight","sharp right":"kNewNameSharpRight"}),depart:Object.freeze({default:"kDepartDefault","sharp left":"kDepartLeft",left:"kDepartLeft","slight left":"kDepartLeft",straight:"kDepartDefault","slight right":"kDepartRight",right:"kDepartRight","sharp right":"kDepartRight"}),arrive:Object.freeze({default:"kArriveDefault","sharp left":"kArriveLeft",left:"kArriveLeft","slight left":"kArriveLeft",straight:"kArriveDefault","slight right":"kArriveRight",right:"kArriveRight","sharp right":"kArriveRight"}),merge:Object.freeze({default:"kMergeDefault","sharp left":"kMergeLeft",left:"kMergeLeft","slight left":"kMergeLeft",straight:"kMergeDefault","slight right":"kMergeRight",right:"kMergeRight","sharp right":"kMergeRight"}),"on ramp":Object.freeze({default:"kUndefined","sharp left":"kOnRampLeft",left:"kOnRampLeft","slight left":"kOnRampLeft","slight right":"kOnRampRight",right:"kOnRampRight","sharp right":"kOnRampRight"}),"off ramp":Object.freeze({default:"kUndefined","sharp left":"kOffRampLeft",left:"kOffRampLeft","slight left":"kOffRampLeft","slight right":"kOffRampRight",right:"kOffRampRight","sharp right":"kOffRampRight"}),fork:Object.freeze({default:"kUndefined","sharp left":"kForkLeft",left:"kForkLeft","slight left":"kForkLeft","slight right":"kForkRight",right:"kForkRight","sharp right":"kForkRight"}),"end of road":Object.freeze({default:"kUndefined","sharp left":"kEndOfRoadLeft",left:"kEndOfRoadLeft","slight left":"kEndOfRoadLeft","slight right":"kEndOfRoadRight",right:"kEndOfRoadRight","sharp right":"kEndOfRoadRight"}),continue:Object.freeze({default:"kUndefined","sharp left":"kContinueSharpLeft",left:"kContinueLeft","slight left":"kContinueSlightLeft",straight:"kContinueStraight","slight right":"kContinueSlightRight",right:"kContinueRight","sharp right":"kContinueSharpRight"}),roundabout:Object.freeze({default:"kUndefined","sharp left":"kRoundaboutLeft",left:"kRoundaboutLeft","slight left":"kRoundaboutLeft","slight right":"kRoundaboutRight",right:"kRoundaboutRight","sharp right":"kRoundaboutRight"}),rotary:Object.freeze({default:"kUndefined","sharp left":"kRotaryLeft",left:"kRotaryLeft","slight left":"kRotaryLeft","slight right":"kRotaryRight",right:"kRotaryRight","sharp right":"kRotaryRight"}),"roundabout turn":Object.freeze({default:"kUndefined","sharp left":"kRoundaboutTurnSharpLeft",left:"kRoundaboutTurnLeft","slight left":"kRoundaboutTurnSlightLeft",straight:"kRoundaboutTurnStraight","slight right":"kRoundaboutTurnSlightRight",right:"kRoundaboutTurnRight","sharp right":"kRoundaboutTurnSharpRight"}),notification:Object.freeze({default:"kUndefined"}),default:Object.freeze({default:"kUndefined"})});class R extends class{#re;#ie;#ae(e,t){}constructor(){Object.freeze(this),this.#re="fr"}getPromiseRoute(e){return this.#ie=e,new Promise(((e,t)=>this.#ae(e,t)))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get userLanguage(){return this.#re}set userLanguage(e){this.#re=e}}{#ie;static get#ne(){return 6}#se(e,t,r){if("Ok"!==e.code)return void r(new Error("Response code not ok"));if(0===e.routes.length)return void r(new Error("Route not found"));this.#ie.itinerary.itineraryPoints.removeAll(),this.#ie.itinerary.maneuvers.removeAll(),this.#ie.itinerary.hasProfile=!1,this.#ie.itinerary.ascent=0,this.#ie.itinerary.descent=0;const i=new a;e.routes[0].geometry=i.decode(e.routes[0].geometry,[R.#ne,R.#ne]),e.routes[0].legs.forEach((e=>{let t=0;e.steps.forEach((r=>{r.geometry=i.decode(r.geometry,[R.#ne,R.#ne]);const a=new m;a.iconName=k[r.maneuver.type]?k[r.maneuver.type][r.maneuver.modifier]||k[r.maneuver.type].default:k.default.default,a.instruction=N.compile(this.userLanguage,r),a.duration=r.duration;let n=0;for(let i=0;1===r.geometry.length?1>i:i<r.geometry.length;i++){const s=new h;s.latLng=[r.geometry[i][0],r.geometry[i][1]],s.distance=e.annotation.distance[t]?e.annotation.distance[t]:0,this.#ie.itinerary.itineraryPoints.add(s),i!==r.geometry.length-1&&(n+=s.distance,t++),0===i&&(a.itineraryPointObjId=s.objId)}a.distance=n,this.#ie.itinerary.maneuvers.add(a)}))}));const n=this.#ie.wayPoints.iterator;e.waypoints.forEach((e=>{n.done||(n.value.latLng=[e.location[1],e.location[0]])})),t(this.#ie)}#oe(){let e=null;this.#ie.wayPoints.forEach((t=>{e=e?e+";":"",e+=t.lng.toFixed(r.fixed)+","+t.lat.toFixed(r.fixed)}));let t="";switch(this.#ie.itinerary.transitMode){case"car":t="routed-car";break;case"bike":t="routed-bike";break;case"pedestrian":t="routed-foot";break;default:return}return"https://routing.openstreetmap.de/"+t+"/route/v1/driving/"+e+"?geometries=polyline6&overview=full&steps=true&annotations=distance"}#ae(e,t){fetch(this.#oe()).then((r=>{200===r.status&&r.ok?r.json().then((r=>this.#se(r,e,t))):t(new Error("Invalid status "+r.status))}))}constructor(){super()}getPromiseRoute(e){return this.#ie=e,new Promise(((e,t)=>this.#ae(e,t)))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4QkaDwEMOImNWgAABTZJREFUSMftl21sFEUYx3+zu3ft9a7Q0tIXoKUCIkIVeYsECmgbBKIIEVC0QEs0UIEghA+CEkkIaCyJBhFBBC00qHxoQClvhgLyEonyckhbFKS90iK0FAqFHr273R0/XNlCymEREr44X3by7DPzm5n9z8x/hZRS8giKwiMqjwys3U/y/pIqdh0tp8RTS229F0yIaxtBz+R2jOjfhSFPJbW6L9Gab/zFdjfv5x/k2g0f4TYVISUCEJKmp8QfMGjjsLNoShozxvR7MHD1VS+D53+Pp/oqmqJYoEBAxzQlQoKmCMJUJTgAwDQkye0j2f1JJvHRzvsH/3m+jqfn5IOUICWGYZIY5WTScz1J751EYjsXArh45QZ73BV8W1RC7VUvNkVBEBzUoZXZPJEc03rwhboGkqettWYopeSb2SPIHPbkPZfvu6JSZizfidIExpQU5+eQ0M7VOnDS9LVcvNKAkBDtDOf35ZOIj3K2SjSXrnoZNDOPuvqbCCA+yklxfs6/g3O3HOXd/ANoikCakvPrphEfFWG9P1R6ni+3n6Ck4hJI6JUcS/YLqaQ/09nKuVx/kx6TVoGUmIZkYVYac18beG+wfeLnGIaBqZtseGckk59rXt7xH/5IwaHTRNjVO1Tt8wcY1b8rWxaPs3J/OHiarKVbsKkqqoCLW+eFPkB2uD0EfAEAOsa67oC+tHgzW387iyNMQ0qJ1xfA6wsgpSTcprHX7eHFBZus/DFp3XksMRoAX0Bn169nQ4N3HT+H0FQApqb3suLbj5Sx7UgZihA0Bgxmje5HeV4Ong05zB7bn8aAjhCCfSfOUfjLGatd5vBUkGDXVPYeKQ8NdldcCu7FgMHIPilWfMU2N2E2FVNK3pvwLLlvDqNzXBuS2rdh6dShfJCZhikldpvKmkK31e75vin4AjoAxWU1ocHV17zBimnS4bYtcKysGgC/T2feK/1bKHTu+AF4G4OfyH2m2oonxrgwTGmpPSRYms11VRFWPaA3vZCSMFvL4z3MpnFLorrZ3IkixG19y9DgmMjwWy34+0qDFe/RqR0AtjAbeUXFLcAbfjpJRHhwQI835QJU1zVYE4hqEx4anJocAwKEprK3uNKKZ6X3wjAlqiKYvXoP63c3wzfuKWHGil2oioJhSt7IaBbl/hPnsNuCYu2ZEhd6Hxcc/ovxuYUoqqB7QhSnVmRZid1z1lFZcx0BGLqB36+DBIddw6YKhITEaCen8qZbbQbmfE1ZVR2GYbBuwcuMHdrj7jMeN7CbVf+j8jI7jnmaBfbpZDrEuDClRFMVnA47LocdTVUwTUlctJPDK7Ot/KKj5ZSW1yIBw5R3QO/qQOaN7QcSNJvKq8sKaWhSq8th5+xXb7F40mA6xUbScNPPDa+fjjGRLMwczOm86bR1hgFw06eT/dFWwuzBZZ45bkDrLglX5kp8fh0hITk2kpOfTcFhb51ZafTrDJqZx7mL1xAED4+qzXMQrfFcB5ZMQPcbAFTWXichazU/3ya2UOVQcRXdMldRUX0teFT6DQo/ntgCek8jsPO4h1GLCrDbNZASv1+nX9d4sjJSyeidREJ00AhcqGtgn7uCjUUlHDt9AYdNQyDx+XQKlkxgxIAu9299jpbVMGT+JgzDsG4j2TQIacqgFhRBuKagCmHlaIpgZ+7r9O2e8N/NXsAwmbVmD2u2ubFpKpoiWpo9JNIIGr63R/dhWU4Gmqo8uMsE8OsG64tK2X3cQ7Gnhsv1jShS0L5tOL2SY8jok8Lk4anYm263h2Jv//+FeRjlHxKxS4in4X1YAAAAAElFTkSuQmCC"}get name(){return"OSRM"}get title(){return"OSRM"}get transitModes(){return["bike","pedestrian","car"]}get providerKeyNeeded(){return!1}get userLanguage(){return super.userLanguage}set userLanguage(e){super.userLanguage=N.loadLanguage(e)}}window.TaN.addProvider(R)}();
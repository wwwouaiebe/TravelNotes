/**
 * 
 * @source: https://github.com/wwwouaiebe/TravelNotes
 * 
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this page.
 * 
 * travelnotes - version 5.0.0-dev
 * Build 43 - Mon Jan 05 2026 15:38:06 GMT+0100 (heure normale d’Europe centrale)
 * Copyright 2019 2026 wwwouaiebe 
 * Contact: https://www.ouaie.be/
 * License: GPL-3.0
 * 
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 * 
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 * 
 * @licend  The above is the entire license notice
 * for the JavaScript code in this page.
 * 
*/


!function(){"use strict";class t{static get d0(){return 0}static get d90(){return 90}static get d180(){return 180}static get d270(){return 270}static get d360(){return 360}static get d540(){return 540}static get toRadians(){return Math.PI/180}static get fromRadians(){return 180/Math.PI}}class e{static get fixed(){return 2}static get invalid(){return-1}static get defaultValue(){return 0}static get metersInKm(){return 1e3}}class r{static get fixed(){return 2}static get defaultValue(){return 0}}class a{static get defaultValue(){return 0}static get fixed(){return 6}static get maxLat(){return 90}static get minLat(){return-90}static get maxLng(){return 180}static get minLng(){return-180}}class i{static get notEdited(){return 0}static get editedNoChange(){return 1}static get editedChanged(){return 2}}const s=new class{#t(e){return(e+t.d540)%t.d360-t.d180}constructor(){Object.freeze(this)}arcFromSummitArcArc(t,e,r){return Math.acos(Math.cos(e)*Math.cos(r)+Math.sin(e)*Math.sin(r)*Math.cos(t))}summitFromArcArcArc(t,e,r){return Math.acos((Math.cos(r)-Math.cos(t)*Math.cos(e))/(Math.sin(t)*Math.sin(e)))}pointsDistance(e,r){if(e[0]===r[0]&&e[1]===r[1])return 0;const a=e[0]*t.toRadians,i=r[0]*t.toRadians,s=(this.#t(r[1])-this.#t(e[1]))*t.toRadians;return 6371e3*Math.acos(Math.sin(a)*Math.sin(i)+Math.cos(a)*Math.cos(i)*Math.cos(s))}};class n{static#e=0;static get nextObjId(){return++n.#e}}const o="5.0.0";class l{#r="";#a=["Itinerary","ItineraryPoint","Maneuver","Note","Route","Travel","WayPoint"];#i=[];constructor(t,e){if(Object.freeze(this),-1===this.#a.indexOf(t))throw new Error("Invalid ObjType name : "+t);this.#r=t,this.#i=e,Object.freeze(this.#i)}get name(){return this.#r}get version(){return o}get properties(){return this.#i}get jsonObject(){return{name:this.#r,version:o}}validate(t){if(!Object.getOwnPropertyNames(t).includes("name"))throw new Error("No name for "+this.#r);if(this.#r!==t.name)throw new Error("Invalid name for "+this.#r);if(!Object.getOwnPropertyNames(t).includes("version"))throw new Error("No version for "+this.#r)}}class d{#s;#n(){this.#s.routes.forEach(t=>{t.dashArray=0,t.hidden=!1})}#o(){this.#s.routes.forEach(t=>{t.edited=i.notEdited})}#l(){this.#o(),this.#s.editedRoute={name:"",wayPoints:[{name:"",lat:0,lng:0,objId:2,objType:{name:"WayPoint",version:"1.4.0"}},{name:"",lat:0,lng:0,objId:3,objType:{name:"WayPoint",version:"1.4.0"}}],notes:[],itinerary:{itineraryPoints:[],maneuvers:[],provider:"",transitMode:"",objId:1,objType:{name:"Itinerary",version:"1.4.0"}},width:3,color:"#ff0000",dashArray:0,chain:!0,distance:0,duration:0,edited:i.notEdited,hidden:!1,chainedDistance:0,objId:4,objType:{name:"Route",version:"1.4.0"}}}#d(){if(this.#s.userData.layerId){const t=[{layerId:"0",layerName:"OSM - Color"},{layerId:"1",layerName:"OSM - Black and White"},{layerId:"2",layerName:"Thunderforest - Transport"},{layerId:"3",layerName:"Thunderforest - OpenCycleMap"},{layerId:"4",layerName:"Thunderforest - Outdoors"},{layerId:"5",layerName:"Esri - Aerial view"},{layerId:"6",layerName:"Kartverket - Norway"},{layerId:"7",layerName:"IGN-NGI - Belgium now"},{layerId:"12",layerName:"Thunderforest - Landscape"},{layerId:"24",layerName:"Lantmäteriet - Sweden"},{layerId:"25",layerName:"Maanmittauslaitos - Finland"}].find(t=>t.layerId===this.#s.userData.layerId);this.#s.layerName=t?t.layerName:"OSM - Color"}else this.#s.layerName="OSM - Color"}#u(t){t.forEach(t=>{t.elev=r.defaultValue})}#h(){this.#s.routes.forEach(t=>{t.itinerary.hasProfile=!1,t.itinerary.ascent=0,t.itinerary.descent=0,this.#u(t.itinerary.itineraryPoints)}),this.#s.editedRoute.itinerary.hasProfile=!1,this.#s.editedRoute.itinerary.ascent=0,this.#s.editedRoute.itinerary.descent=0,this.#u(this.#s.editedRoute.itinerary.itineraryPoints)}#c(t){t.itinerary.maneuvers.forEach(t=>{"kArriveDefault"===t.iconName&&(t.distance=e.defaultValue)})}#g(t){t.wayPoints.forEach(t=>{t.address=t.name,t.name=""})}#p(){this.#s.routes.forEach(t=>{t.editionStatus=t.edited,this.#c(t),this.#g(t)}),this.#s.editedRoute.editionStatus=this.#s.editedRoute.edited,this.#c(this.#s.editedRoute),this.#g(this.#s.editedRoute)}#v(){this.#s.routes.forEach(t=>{t.dashIndex=t.dashArray}),this.#s.editedRoute.dashIndex=this.#s.editedRoute.dashArray}#y(t){return t.replaceAll(/style='color:white;background-color:red'/g,"class='TravelNotes-Note-WhiteRed'").replaceAll(/style='color:white;background-color:green'/g,"class='TravelNotes-Note-WhiteGreen'").replaceAll(/style='color:white;background-color:blue'/g,"class='TravelNotes-Note-WhiteBlue'").replaceAll(/style='color:white;background-color:brown'/g,"class='TravelNotes-Note-WhiteBrown'").replaceAll(/style='color:white;background-color:black'/g,"class='TravelNotes-Note-WhiteBlack'").replaceAll(/style='border:solid 0.1em'/g,"class='TravelNotes-Note-BlackWhite'").replaceAll(/style='background-color:white;'/g,"class='TravelNotes-Note-Knooppunt'").replaceAll(/style='fill:green;font:bold 120px sans-serif;'/g,"").replaceAll(/style='fill:none;stroke:green;stroke-width:10;'/g,"")}#f(t){"string"==typeof t.iconHeight&&(t.iconHeight=Number.parseInt(t.iconHeight)),"string"==typeof t.iconWidth&&(t.iconWidth=Number.parseInt(t.iconWidth)),t.iconContent=this.#y(t.iconContent),t.popupContent=this.#y(t.popupContent),t.tooltipContent=this.#y(t.tooltipContent),t.phone=this.#y(t.phone),t.address=this.#y(t.address)}#m(){this.#s.notes.forEach(t=>{this.#f(t)}),this.jsonTravel.routes.forEach(t=>{t.notes.forEach(t=>{this.#f(t)})})}#b(t){[[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kBusEnd"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0075"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kBusStart"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0076"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kFerryExit"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0077"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kFerryEnter"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0078"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kTrainEnd"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0079"></div>'],[RegExp('<div class="TravelNotes-MapNote TravelNotes-UI-kTrainStart"><svg viewBox="0 0 20 20"></svg></div>',"g"),'<div class="travelnotes-map-note travelnotes-map-note-category-0080"></div>'],[/class="TravelNotes-MapNote TravelNotes-MapNoteCategory/g,'class="travelnotes-map-note travelnotes-map-note-category'],[/class="TravelNotes-SvgIcon/g,'class="travelnotes-svg-icon'],[/class="TravelNotes-OSM-Itinerary/g,'class="travelnotes-osm-itinerary'],[/class="TravelNotes-OSM-Highway TravelNotes-OSM-Highway/g,'class="travelnotes-osm-highway travelnotes-osm-highway'],[/class="TravelNotes-OSM-RcnRef/g,'class="travelnotes-osm-rcn-ref']].forEach(e=>{t.iconContent=t.iconContent.replaceAll(e[0],e[1])}),[[/class="TravelNotes-Note-WhiteRed/g,'class="travelnotes-note-white-red'],[/class="TravelNotes-Note-WhiteGreen/g,'class="travelnotes-note-white-green'],[/class="TravelNotes-Note-WhiteBlue/g,'class="travelnotes-note-white-blue'],[/class="TravelNotes-Note-WhiteBrown/g,'class="travelnotes-note-white-brown'],[/class="TravelNotes-Note-WhiteBlack/g,'class="travelnotes-note-white-black'],[/class="TravelNotes-Note-BlackWhite/g,'class="travelnotes-note-black-white']].forEach(e=>{t.iconContent=t.iconContent.replaceAll(e[0],e[1]),t.popupContent=t.popupContent.replaceAll(e[0],e[1]),t.tooltipContent=t.tooltipContent.replaceAll(e[0],e[1]),t.address=t.address.replaceAll(e[0],e[1]),t.phone=t.phone.replaceAll(e[0],e[1])})}#N(){const t=new Map;t.set("kArriveLeft","arrive-left"),t.set("kArriveRight","arrive-right"),t.set("kContinueLeft","continue-left"),t.set("kContinueRight","continue-right"),t.set("kContinueSharpLeft","continue-sharp-left"),t.set("kContinueSharpRight","continue-sharp-right"),t.set("kContinueSlightLeft","continue-slight-left"),t.set("kContinueSlightRight","continue-slight-right"),t.set("kContinueStraight","continue-straight"),t.set("kDepartDefault","depart-default"),t.set("kDepartLeft","depart-left"),t.set("kDepartRight","depart-right"),t.set("kEndOfRoadLeft","end-of-road-left"),t.set("kEndOfRoadRight","end-of-road-right"),t.set("kFerryEnter","ferry-enter"),t.set("kFerryExit","ferry-exit"),t.set("kForkLeft","fork-left"),t.set("kForkRight","fork-right"),t.set("kMergeDefault","merge-default"),t.set("kMergeLeft","merge-left"),t.set("kMergeRight","merge-right"),t.set("kNewNameLeft","new-name-left"),t.set("kNewNameRight","new-name-right"),t.set("kNewNameSharpLeft","new-name-sharp-left"),t.set("kNewNameSharpRight","new-name-sharp-right"),t.set("kNewNameSlightLeft","new-name-slight-left"),t.set("kNewNameSlightRight","new-name-slight-right"),t.set("kNewNameStraight","new-name-straight"),t.set("kOffRampLeft","off-ramp-left"),t.set("kOffRampRight","off-ramp-right"),t.set("kOnRampLeft","on-ramp-left"),t.set("kOnRampRight","on-ramp-right"),t.set("kRotaryLeft","rotary-left"),t.set("kRotaryRight","rotary-right"),t.set("kRoundaboutExit","roundabout-exit"),t.set("kRoundaboutLeft","roundabout-left"),t.set("kRoundaboutRight","roundabout-right"),t.set("kRoundaboutTurnLeft","roundabout-turn-left"),t.set("kRoundaboutTurnRight","roundabout-turn-right"),t.set("kRoundaboutTurnSharpLeft","roundabout-turn-sharp-left"),t.set("kRoundaboutTurnSharpRight","roundabout-turn-sharp-right"),t.set("kRoundaboutTurnSlightLeft","roundabout-turn-slight-left"),t.set("kRoundaboutTurnSlightRight","roundabout-turn-slight-right"),t.set("kRoundaboutTurnStraight","roundabout-turn-straight"),t.set("kStayLeft","stay-left"),t.set("kStayRight","stay-right"),t.set("kStayStraight","stay-straight"),t.set("kTurnLeft","turn-left"),t.set("kTurnRight","turn-right"),t.set("kTurnSharpLeft","turn-sharp-left"),t.set("kTurnSharpRight","turn-sharp-right"),t.set("kTurnSlightLeft","turn-slight-left"),t.set("kTurnSlightRight","turn-slight-right"),t.set("kTurnStraight","turn-straight"),t.set("kTurnUturn","turn-u-turn"),t.set("kUndefined","undefined"),t.set("kUturnLeft","u-turn-left"),t.set("kUturnRight","u-turn-right"),t.set("kTrainStart","train-start"),t.set("kTrainContinue","train-continue"),t.set("kTrainEnd","train-end"),this.#s.routes.forEach(e=>{e.itinerary.maneuvers.forEach(e=>{e.iconName=t.get(e.iconName)||"undefined"})})}#T(){this.#s.notes.forEach(t=>{this.#b(t)}),this.#s.routes.forEach(t=>{t.notes.forEach(t=>{this.#b(t)})})}#A(){switch(this.#s.objType.version){case"1.0.0":this.#n();case"1.1.0":case"1.2.0":case"1.3.0":case"1.4.0":this.#l();case"1.5.0":this.#d();case"1.6.0":this.#h();case"1.7.0":case"1.7.1":case"1.8.0":case"1.9.0":case"1.10.0":case"1.11.0":this.#p();case"1.12.0":case"1.13.0":this.#m();case"2.0.0":case"2.1.0":case"2.2.0":case"2.3.0":this.#v();case"2.4.0":this.#T(),this.#N(),this.#s.objType.version="5.0.0";break;default:throw new Error("invalid version for travel")}}constructor(){Object.freeze(this)}update(t){t.objType.version!==o&&(this.#s=t,this.#A())}}class u{constructor(){Object.freeze(this)}validateObject(t){if(!Object.getOwnPropertyNames(t).includes("objType"))throw new Error("No objType for "+this.objType.name);this.objType.validate(t.objType),"Travel"===this.objType.name&&this.objType.version!==t.objType.version&&(new d).update(t);const e=Object.getOwnPropertyNames(t);return this.objType.properties.forEach(t=>{if(!e.includes(t))throw new Error("No "+t+" for "+this.objType.name)}),t}}class h extends u{static#j=new l("ItineraryPoint",["lat","lng","distance","elev","objId"]);#w=a.defaultValue;#_=a.defaultValue;#M=e.defaultValue;#I=r.defaultValue;#e=-1;constructor(){super(),this.#e=n.nextObjId}get lat(){return this.#w}set lat(t){this.#w="number"==typeof t?t:a.defaultValue}get lng(){return this.#_}set lng(t){this.#_="number"==typeof t?t:a.defaultValue}get distance(){return this.#M}set distance(t){this.#M="number"==typeof t?t:e.defaultValue}get elev(){return this.#I}set elev(t){this.#I="number"==typeof t?t:a.defaultValue}get latLng(){return[this.lat,this.lng]}set latLng(t){"number"==typeof t[0]&&"number"==typeof t[1]?(this.#w=t[0],this.#_=t[1]):(this.#w=a.defaultValue,this.#_=a.defaultValue)}get objType(){return h.#j}get objId(){return this.#e}get jsonObject(){return{lat:parseFloat(this.lat.toFixed(a.fixed)),lng:parseFloat(this.lng.toFixed(a.fixed)),distance:parseFloat(this.distance.toFixed(e.fixed)),elev:parseFloat(this.elev.toFixed(r.fixed)),objId:this.#e,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.lat=e.lat,this.lng=e.lng,this.distance=e.distance,this.elev=e.elev,this.#e=n.nextObjId}}class c{#S=new Map;constructor(){Object.freeze(this),this.#S.set("a",["href","target"]),this.#S.set("div",[]),this.#S.set("del",[]),this.#S.set("em",[]),this.#S.set("figcaption",[]),this.#S.set("figure",[]),this.#S.set("h1",[]),this.#S.set("h2",[]),this.#S.set("h3",[]),this.#S.set("h4",[]),this.#S.set("h5",[]),this.#S.set("h6",[]),this.#S.set("hr",[]),this.#S.set("img",["src","alt","width","height"]),this.#S.set("ins",[]),this.#S.set("li",[]),this.#S.set("mark",[]),this.#S.set("ol",[]),this.#S.set("p",[]),this.#S.set("s",[]),this.#S.set("small",[]),this.#S.set("strong",[]),this.#S.set("span",[]),this.#S.set("sub",[]),this.#S.set("sup",[]),this.#S.set("ul",[]),this.#S.set("svg",["xmlns","viewBox","class"]),this.#S.set("text",["x","y","text-anchor"]),this.#S.set("polyline",["points","class","transform"]),this.#S.set("#text",[])}getValidAttributesNames(t){return this.#S.get(t).concat(["id","class","dir","title"])}getValidNodeName(t){const e=t.toLowerCase();return this.#S.get(e)?e:""}}class g{#k;#R;constructor(t,e){Object.freeze(this),this.#k=t,this.#R=e}get htmlString(){return this.#k}get errorsString(){return this.#R}}class p{#O;#R;constructor(t,e){Object.freeze(this),this.#O=t,this.#R=e}get url(){return this.#O}get errorsString(){return this.#R}}class v{#E="";#x="";static#V=new c;#L(t){return t.replaceAll(/\u003c/g,"&lt;").replaceAll(/\u003e/g,"&gt;").replaceAll(/\u0022/g,"&quot;").replaceAll(/\u0027/g,"&apos;").replaceAll(/\u0a00/g,"&nbsp;")}#P(t,e){const r=this.sanitizeToUrl(t,e).url;""===r&&""!==t?this.#x+="\nAn invalid url ("+t+") was removed from a "+e+" attribute":this.#E+=" "+e+'="'+r+'"'}#C(t,e){v.#V.getValidAttributesNames(e).forEach(e=>{t.hasAttributeNS(null,e)&&(this.#E+=" "+e+'="'+this.#L(t.getAttributeNS(null,e))+'"',t.removeAttributeNS(null,e))})}#U(t,e){t.hasAttribute("target")&&(this.#E+=' rel="noopener noreferrer"'),v.#V.getValidAttributesNames(e).forEach(e=>{t.hasAttribute(e)&&("href"===e||"src"===e?this.#P(t.getAttribute(e),e):this.#E+=" "+e+'="'+this.#L(t.getAttribute(e))+'"',t.removeAttribute(e))})}#z(t){for(let e=0;e<t.attributes.length;e++)"rel"!==t.attributes[e].name&&(this.#x+="\nAn unsecure attribute "+t.attributes[e].name+'="'+t.attributes[e].value+'" was removed.')}#F(t){const e=t.childNodes;for(let r=0;r<e.length;r++){const e=t.childNodes[r],a=v.#V.getValidNodeName(e.nodeName);""===a?this.#x+="\nAn invalid tag "+e.nodeName+" was removed":"#text"===a?this.#E+=this.#L(e.nodeValue):(this.#E+="<"+a,"svg"===a||"text"===a||"polyline"===a?this.#C(e,a):this.#U(e,a),this.#E+=">",this.#F(e),this.#E+="</"+a+">",e.attributes&&this.#z(e))}}#H(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg",e);return v.#V.getValidAttributesNames(e).forEach(e=>{t.hasAttributeNS(null,e)&&(r.setAttributeNS(null,e,t.getAttributeNS(null,e)),t.removeAttributeNS(null,e))}),r}#B(t,e){const r=document.createElement(e);return v.#V.getValidAttributesNames(e).forEach(e=>{if(t.hasAttribute(e))if("href"===e||"src"===e){const a=this.sanitizeToUrl(t.getAttribute(e),e).url;""!==a&&r.setAttribute(e,a)}else r.setAttribute(e,t.getAttribute(e))}),t.hasAttribute("target")&&r.setAttribute("rel","noopener noreferrer"),r}#D(t,e){const r=t.childNodes;for(let a=0;a<r.length;a++){const r=t.childNodes[a],i=v.#V.getValidNodeName(r.nodeName);if("#text"===i)e.appendChild(document.createTextNode(r.nodeValue));else if(""!==i){const t="svg"===i||"text"===i||"polyline"===i?this.#H(r,i):this.#B(r,i);e.appendChild(t),this.#D(r,t)}}}constructor(){Object.freeze(this)}sanitizeToHtmlElement(t,e){const r=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html"),a=new DocumentFragment;r&&"#document"===r.nodeName?(this.#D(r.body.firstChild,a),e.appendChild(a)):e.textContent=""}clone(t){const e=document.createElement(t.tagName);return this.#D(t,e),e}sanitizeToHtmlString(t){this.#E="",this.#x="";const e=(new DOMParser).parseFromString("<div>"+t.replace("&nbsp;","਀")+"</div>","text/html");return e&&"#document"===e.nodeName?(this.#F(e.body.firstChild),new g(this.#E,this.#x)):new g("","Parsing error")}sanitizeToUrl(t,e){const r=e||"href",a=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!a||"#document"!==a.nodeName)return new p("","Parsing error");const i=a.body.firstChild;let s="";for(let t=0;t<i.childNodes.length;t++){if("#text"!==i.childNodes[t].nodeName)return new p("","Invalid characters found in the url");s+=i.childNodes[t].nodeValue}if(s=s.replaceAll(/</g,"").replaceAll(/>/g,"").replaceAll(/"/g,"").replaceAll(/\u0027/g,"").replaceAll(/&lt;/g,"").replaceAll(/&gt;/g,"").replaceAll(/&quot;/g,"").replaceAll(/&apos;/g,"").replaceAll(/%3C/g,"").replaceAll(/%3c/g,"").replaceAll(/%3E/g,"").replaceAll(/%3e/g,"").replaceAll(/%22/g,"").replaceAll(/%27/g,""),s!==t)return new p("","Invalid characters found in the url");const n=["https:"];if("http:"!==window.location.protocol&&"href"!==r||n.push("http:"),"href"===r){n.push("mailto:"),n.push("sms:"),n.push("tel:");const t=s.match(/^\u0023\w*/);if(t&&s===t[0])return new p(s,"")}"src"===r&&n.push("data:");let o=null;try{o=new URL(s)}catch{return new p("","Invalid url string")}if(-1===n.indexOf(o.protocol))return new p("","Invalid protocol "+o.protocol);if(-1!==["sms:","tel:"].indexOf(o.protocol))return o.pathname.match(/^\+[0-9,*,\u0023]*$/)?new p(s,""):new p("","Invalid sms: or tel: url");try{encodeURIComponent(o.href)}catch{return new p("","Invalid character in url")}return new p(s,"")}sanitizeToJsString(t){const e=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html");if(!e||"#document"!==e.nodeName)return"";const r=e.body.firstChild;let a="";for(let t=0;t<r.childNodes.length;t++){if("#text"!==r.childNodes[t].nodeName)return"";a+=r.childNodes[t].nodeValue}return a=a.replaceAll(/</g,"≺").replaceAll(/>/g,"≻").replaceAll(/"/g,"″").replaceAll(/\u0027/g,"′"),a}sanitizeToColor(t){const e=t.match(/^\u0023[0-9,A-F,a-f]{6}$/);return e?e[0]:null}}const y=new v;class f extends u{static#j=new l("Maneuver",["iconName","instruction","distance","duration","itineraryPointObjId","objId"]);#W="";#G="";#K=-1;#M=e.defaultValue;#Q=e.defaultValue;#e=-1;constructor(){super(),this.#e=n.nextObjId}get iconName(){return this.#W}set iconName(t){this.#W="string"==typeof t?y.sanitizeToJsString(t):""}get instruction(){return this.#G}set instruction(t){this.#G="string"==typeof t?y.sanitizeToJsString(t):""}get itineraryPointObjId(){return this.#K}set itineraryPointObjId(t){this.#K="number"==typeof t?t:-1}get distance(){return this.#M}set distance(t){this.#M="number"==typeof t?t:e.defaultValue}get duration(){return this.#Q}set duration(t){this.#Q="number"==typeof t?t:e.defaultValue}get objType(){return f.#j}get objId(){return this.#e}get jsonObject(){return{iconName:this.iconName,instruction:this.instruction,distance:parseFloat(this.distance.toFixed(e.fixed)),duration:this.duration,itineraryPointObjId:this.itineraryPointObjId,objId:this.#e,objType:this.objType.jsonObject}}set jsonObject(t){const e=this.validateObject(t);this.iconName=e.iconName,this.instruction=e.instruction,this.distance=e.distance,this.duration=e.duration,this.itineraryPointObjId=e.itineraryPointObjId,this.#e=n.nextObjId}}class m{#q;#J;#X(t,e){}constructor(){Object.freeze(this),this.#q="fr"}getPromiseRoute(t){return this.#J=t,new Promise((t,e)=>this.#X(t,e))}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVEhL7cyxDQAgAAQh91/67ektTI4BOHumGtWoRjWqUY1qVKMaP9bbBZKXggu6NeCUAAAAAElFTkSuQmCC"}get name(){return""}get title(){return""}get transitModes(){return[]}get providerKeyNeeded(){return!0}get userLanguage(){return this.#q}set userLanguage(t){this.#q=t}}const b=Math.PI/2;class N extends m{#J;static get#Y(){return Object.freeze({en:Object.freeze({kStart:"Start",kContinue:"Continue",kEnd:"Stop"}),fr:Object.freeze({kStart:"Départ",kContinue:"Continuer",kEnd:"Arrivée"})})}static get#Z(){return Object.freeze({kStart:"depart-default",kContinue:"continue-straight",kEnd:"arrive-default"})}#$(t,e){const r=new f;r.iconName=N.#Z[e],r.instruction=N.#Y[this.userLanguage]?N.#Y[this.userLanguage][e]:N.#Y.en[e],r.duration=0,r.itineraryPointObjId=t,this.#J.itinerary.maneuvers.add(r)}#tt(t){const e=new h;return e.latLng=t,this.#J.itinerary.itineraryPoints.add(e),e.objId}#et(e,r){const a=[e.lat*t.toRadians,e.lng*t.toRadians],i=[r.lat*t.toRadians,r.lng*t.toRadians],n=(r.lng-e.lng+t.d360)%t.d360>t.d180?-1:1,o=s.arcFromSummitArcArc(i[1]-a[1],b-a[0],b-i[0]);if(.1>o*t.fromRadians)return;const l=s.summitFromArcArcArc(b-a[0],o,b-i[0]),d=[];for(let e=1;e<=64;e++){const r=o*e/64,i=s.arcFromSummitArcArc(l,b-a[0],r),u=s.summitFromArcArcArc(b-a[0],i,r),c=new h;c.latLng=[(b-i)*t.fromRadians,(a[1]+n*u)*t.fromRadians],d.push(c)}r.lng=d.pop().lng,d.forEach(t=>this.#J.itinerary.itineraryPoints.add(t))}#rt(){let e=this.#J.wayPoints.iterator,r=null;for(;!e.done;)e.first?(r=e.value,this.#$(this.#tt(e.value.latLng),"kStart")):(this.#et(r,e.value),this.#$(this.#tt(e.value.latLng),e.last?"kEnd":"kContinue"),r=e.value);let a=-Number.MAX_VALUE,i=this.#J.itinerary.itineraryPoints.iterator;for(;!i.done;)a=Math.max(a,i.value.lng);const s=a%t.d360-a;for(i=this.#J.itinerary.itineraryPoints.iterator;!i.done;)i.value.lng+=s;for(e=this.#J.wayPoints.iterator;!e.done;)e.value.lng+=s}#at(){const e=[this.#J.wayPoints.first.lat*t.toRadians,this.#J.wayPoints.first.lng*t.toRadians],r=[this.#J.wayPoints.last.lat*t.toRadians,this.#J.wayPoints.last.lng*t.toRadians],a=s.arcFromSummitArcArc(e[1]-r[1],b-e[0],b-r[0]),i=360,n=[];for(let r=0;r<=i;r++){const o=Math.PI/720+Math.PI*r/i,l=s.arcFromSummitArcArc(o,a,b-e[0]),d=s.summitFromArcArcArc(b-e[0],l,a);let u=new h;u.latLng=[(b-l)*t.fromRadians,(e[1]+d)*t.fromRadians],n.push(u),u=new h,u.latLng=[(b-l)*t.fromRadians,(e[1]-d)*t.fromRadians],n.unshift(u),r===i&&(this.#$(u.objId,"kStart"),u=new h,u.latLng=[(b-l)*t.fromRadians,(e[1]-d)*t.fromRadians],this.#$(u.objId,"kEnd"),n.push(u))}n.forEach(t=>this.#J.itinerary.itineraryPoints.add(t))}#it(t,e){try{switch(this.#J.itinerary.itineraryPoints.removeAll(),this.#J.itinerary.maneuvers.removeAll(),this.#J.itinerary.hasProfile=!1,this.#J.itinerary.ascent=0,this.#J.itinerary.descent=0,this.#J.itinerary.transitMode){case"line":this.#rt();break;case"circle":this.#at()}t(this.#J)}catch(t){e(t)}}constructor(){super()}getPromiseRoute(t){return this.#J=t,new Promise((t,e)=>this.#it(t,e))}get icon(){return'data:image/svg+xml;utf8,<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" > <circle cx="12" cy="12" r="3" stroke="rgb(0,0,0)" fill="transparent" /> <line x1="5" y1="17" x2="11" y2="2" stroke="rgb(0,0,0)" /> <line x1="3" y1="6" x2="17" y2="9" stroke="rgb(191,0,0)" /> <line x1="3" y1="16" x2="17" y2="5" stroke="rgb(255,204,0)" /> </svg>'}get name(){return"Polyline"}get title(){return"Polyline & Circle"}get transitModes(){return["line","circle"]}get providerKeyNeeded(){return!1}}window.TaN.addProvider(N)}();